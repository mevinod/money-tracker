(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{328:function(e,t,n){e.exports=n.p+"static/media/logo.6f8aaa78.svg"},342:function(e,t,n){e.exports=n(605)},379:function(e,t,n){},462:function(e,t,n){},497:function(e,t,n){},548:function(e,t,n){},560:function(e,t,n){},563:function(e,t,n){},569:function(e,t,n){},571:function(e,t,n){},575:function(e,t,n){},589:function(e,t,n){},593:function(e,t,n){},595:function(e,t,n){},597:function(e,t,n){},599:function(e,t,n){},605:function(e,t,n){"use strict";n.r(t);var a,r,c,o=n(82),i=n(0),s=n.n(i),u=n(100),l=n.n(u),p=n(106),d=(n(366),n(18)),m=n(28),b=n(7),f=n(13),h=n(14),g=n(16),O=n(15),y=n(17),v=n(632),j=n(642),E=n(641),x=n(638),C=n(634),k=n(620),S=n(296),A=n.n(S),T=n(635),w=n(294),R=n(626),N=Object(R.a)("LOAD_SETTINGS_SUCCESS","CHANGE_SETTINGS_CURRENCY","UPDATE_EXCHANGE_RATE","UPDATE_EXCHANGE_RATE_SUCCESS","UPDATE_EXCHANGE_RATE_FAILURE","COMPLETE_SETUP","TOGGLE_SECTION_COLLAPSE"),_=N.loadSettingsSuccess,I=N.changeSettingsCurrency,D=N.updateExchangeRate,M=N.updateExchangeRateSuccess,F=N.updateExchangeRateFailure,L=N.toggleSectionCollapse,P=N.completeSetup,U={AED:{name:"Emirati Dirham",symbol:".\u062f.\u0628",exp:2,flag:"ae"},AFN:{name:"Afghan Afghani",symbol:"\u060b",exp:2,flag:"af"},ALL:{name:"Albanian lek",symbol:"lek",exp:2,flag:"al"},AMD:{name:"Armenian dram",symbol:"AMD",exp:2,flag:"am"},ANG:{name:"Dutch Guilder",symbol:"\u0192",exp:2,flag:"an"},AOA:{name:"Angolan Kwanza",symbol:"Kz",exp:2,flag:"ao"},ARS:{name:"Argentine peso",symbol:"$",exp:2,flag:"ar"},AUD:{name:"Australian Dollar",symbol:"$",exp:2,flag:"au"},AWG:{name:"Arubin florin",symbol:"\u0192",exp:2,flag:"aw"},AZN:{name:"Azerbaijani manat",symbol:"\u043c\u0430\u043d",exp:2,flag:"az"},BAM:{name:"Bosnian Convertible Marka",symbol:"KM",exp:2,flag:"ba"},BBD:{name:"Barbadian dollar",symbol:"$",exp:2,flag:"bb"},BDT:{name:"Bangladeshi Taka",symbol:"Tk",exp:2,flag:"bd"},BGN:{name:"Bulgarian lev",symbol:"\u043b\u0432",exp:2,flag:"bg"},BHD:{name:"Bahraini Dinar",symbol:".\u062f.\u0628 or BD",exp:3,flag:"bh"},BIF:{name:"Burundian Franc",symbol:"FBu",exp:0,flag:"bi"},BMD:{name:"Bermudian dollar",symbol:"$",exp:2,flag:"bm"},BND:{name:"Bruneian Dollar",symbol:"$",exp:2,flag:"bn"},BOB:{name:"Bolivian Boliviano",symbol:"$b",exp:2,flag:"bo"},BRL:{name:"Brazilian real",symbol:"R$",exp:2,flag:"br"},BSD:{name:"Bahamian dollar",symbol:"B$",exp:2,flag:"bs"},BTN:{name:"Bhutanese Ngultrum",symbol:"Nu.",exp:2,flag:"bt"},BWP:{name:"Botswana Pula",symbol:"P",exp:2,flag:"bw"},BYR:{name:"Belarusian ruble",symbol:"\u0440",exp:2,flag:"by"},BZD:{name:"Belize dollar",symbol:"BZ$",exp:2,flag:"bz"},CAD:{name:"Canadian Dollar",symbol:"$",exp:2,flag:"ca"},CHF:{name:"Swiss Franc",symbol:"CHF",exp:2,flag:"ch"},CLP:{name:"Chilean Peso",symbol:"$",exp:0,flag:"cl"},CNY:{name:"Yuan or chinese renminbi",symbol:"\xa5",exp:2,flag:"cn"},COP:{name:"Colombian peso",symbol:"$",exp:2,flag:"co"},CRC:{name:"Costa Rican col\xf3n",symbol:"\u20a1",exp:2,flag:"cr"},CUC:{name:"Cuban convertible peso",symbol:"$",exp:2,flag:"cu"},CUP:{name:"Cuban peso",symbol:"\u20b1",exp:2,flag:"cu"},CVE:{name:"Cape Verdean Escudo",symbol:"$",exp:0,flag:"cv"},CZK:{name:"Czech koruna",symbol:"K\u010d",exp:2,flag:"cz"},DJF:{name:"Djiboutian Franc",symbol:"fdj",exp:0,flag:"dj"},DKK:{name:"Danish krone",symbol:"kr",exp:2,flag:"dk"},DOP:{name:"Dominican peso",symbol:"$",exp:2,flag:"do"},DZD:{name:"Algerian Dinar",symbol:"\u062c\u062f",exp:2,flag:"dz"},EGP:{name:"Egyptian Pound",symbol:"\xa3 ",exp:2,flag:"eg"},ERN:{name:"Eritrean nakfa",symbol:"\u1293\u1255\u134b",exp:2,flag:"er"},ETB:{name:"Ethiopian Birr",symbol:"Br",exp:2,flag:"et"},EUR:{name:"Euro",symbol:"\u20ac",exp:2,flag:"eu"},FJD:{name:"Fijian dollar",symbol:"$",exp:2,flag:"fj"},FKP:{name:"Falkland Island Pound",symbol:"\xa3",exp:2,flag:"fk"},GBP:{name:"British Pound",symbol:"\xa3",exp:2,flag:"gb"},GEL:{name:"Georgian lari",symbol:"\u10da",exp:2,flag:"ge"},GHS:{name:"Ghanaian Cedi",symbol:"GH\xa2",exp:2,flag:"gh"},GIP:{name:"Gibraltar pound",symbol:"\xa3",exp:2,flag:"gi"},GMD:{name:"Gambian dalasi",symbol:"D",exp:2,flag:"gm"},GNF:{name:"Guinean Franc",symbol:"GNF",exp:0,flag:"gn"},GTQ:{name:"Guatemalan Quetzal",symbol:"Q",exp:2,flag:"gt"},GYD:{name:"Guyanese dollar",symbol:"$",exp:2,flag:"gy"},HKD:{name:"Hong Kong dollar",symbol:"HK$",exp:2,flag:"hk"},HNL:{name:"Honduran lempira",symbol:"L",exp:2,flag:"hn"},HRK:{name:"Croatian kuna",symbol:"kn",exp:2,flag:"hr"},HTG:{name:"Haitian gourde",symbol:"G",exp:2,flag:"ht"},HUF:{name:"Hungarian forint",symbol:"Ft",exp:2,flag:"hu"},IDR:{name:"Indonesian Rupiah",symbol:"Rp",exp:2,flag:"id"},ILS:{name:"Israeli Shekel",symbol:"\u20aa",exp:2,flag:"il"},INR:{name:"Indian Rupee",symbol:"\u20b9",exp:2,flag:"in"},IQD:{name:"Iraqi Dinar",symbol:"\u0639.\u062f",exp:3,flag:"iq"},IRR:{name:"Iranian Rial",symbol:"\ufdfc",exp:2,flag:"ir"},ISK:{name:"Icelandic Krona",symbol:"kr",exp:0,flag:"is"},JMD:{name:"Jamaican dollar",symbol:"J$",exp:2,flag:"jm"},JOD:{name:"Jordanian Dinar",symbol:"JOD",exp:3,flag:"jo"},JPY:{name:"Japanese yen",symbol:"\xa5",exp:0,flag:"jp"},KES:{name:"Kenyan Shilling",symbol:"KSh",exp:2,flag:"ke"},KGS:{name:"Kyrgyzstani som",symbol:"\u043b\u0432",exp:2,flag:"kg"},KHR:{name:"Cambodian Riel",symbol:"\u17db",exp:2,flag:"kh"},KMF:{name:"Comoro Franc",symbol:"KMF",exp:0,flag:"km"},KPW:{name:"North Korean won",symbol:"\u20a9",exp:2,flag:"kp"},KRW:{name:"South Korean won",symbol:"\u20a9",exp:0,flag:"kr"},KWD:{name:"Kuwaiti Dinar",symbol:"\u0643",exp:3,flag:"kw"},KYD:{name:"Caymanian Dollar",symbol:"$",exp:2,flag:"ky"},KZT:{name:"Kazakhstani tenge",symbol:"\u20b8",exp:2,flag:"kz"},LAK:{name:"Lao or Laotian Kip",symbol:"\u20ad",exp:2,flag:"la"},LBP:{name:"Lebanese Pound",symbol:"\u0644.\u0644",exp:2,flag:"lb"},LKR:{name:"Sri Lankan Rupee",symbol:"Rs",exp:2,flag:"lk"},LRD:{name:"Liberian Dollar",symbol:"$",exp:2,flag:"lr"},LSL:{name:"Lesotho loti",symbol:"L or M",exp:2,flag:"ls"},LTL:{name:"Lithuanian litas",symbol:"Lt",exp:2,flag:"lt"},LYD:{name:"Libyan Dinar",symbol:" \u062f.\u0644",exp:3,flag:"ly"},MAD:{name:"Moroccan Dirham",symbol:"\u0645.\u062f.",exp:2,flag:"ma"},MDL:{name:"Moldovan Leu",symbol:"L",exp:2,flag:"md"},MGA:{name:"Malagasy Ariary",symbol:"Ar",exp:2,flag:"mg"},MKD:{name:"Macedonian Denar",symbol:"\u0434\u0435\u043d",exp:2,flag:"mk"},MMK:{name:"Burmese Kyat",symbol:"K",exp:2,flag:"mm"},MNT:{name:"Mongolian Tughrik",symbol:"\u20ae",exp:2,flag:"mn"},MOP:{name:"Macau Pataca",symbol:"MOP$",exp:2,flag:"mo"},MRO:{name:"Mauritanian Ouguiya",symbol:"UM",exp:2,flag:"mr"},MUR:{name:"Mauritian rupee",symbol:"Rs",exp:2,flag:"mu"},MVR:{name:"Maldivian Rufiyaa",symbol:"rf",exp:2,flag:"mv"},MWK:{name:"Malawian Kwacha",symbol:"MK",exp:2,flag:"mw"},MXN:{name:"Mexico Peso",symbol:"$",exp:2,flag:"mx"},MYR:{name:"Malaysian Ringgit",symbol:"RM",exp:2,flag:"my"},MZN:{name:"Mozambican Metical",symbol:"MT",exp:2,flag:"mz"},NAD:{name:"Namibian Dollar",symbol:"$",exp:2,flag:"na"},NGN:{name:"Nigerian Naira",symbol:"\u20a6",exp:2,flag:"ng"},NIO:{name:"Nicaraguan c\xf3rdoba",symbol:"C$",exp:2,flag:"ni"},NOK:{name:"Norwegian krone",symbol:"kr",exp:2,flag:"no"},NPR:{name:"Nepalese Rupee",symbol:"Rs",exp:2,flag:"np"},NZD:{name:"New Zealand Dollar",symbol:"$",exp:2,flag:"nz"},OMR:{name:"Omani Rial",symbol:"\u0639.\u0631.",exp:3,flag:"om"},PAB:{name:"Balboa panam\xe9rn",symbol:"B/",exp:2,flag:"pa"},PEN:{name:"Peruvian nuevo sol",symbol:"S/",exp:2,flag:"pe"},PGK:{name:"Papua New Guinean Kina",symbol:"K",exp:2,flag:"pg"},PHP:{name:"Philippine Peso",symbol:"\u20b1",exp:2,flag:"ph"},PKR:{name:"Pakistani Rupee",symbol:"Rs",exp:2,flag:"pk"},PLN:{name:"Polish z\u0142oty",symbol:"z\u0142",exp:2,flag:"pl"},PYG:{name:"Paraguayan guarani",symbol:"\u20b2",exp:0,flag:"py"},QAR:{name:"Qatari Riyal",symbol:"\u0642.\u0631 ",exp:2,flag:"qa"},RON:{name:"Romanian leu",symbol:"lei",exp:2,flag:"ro"},RSD:{name:"Serbian Dinar",symbol:"\u0420\u0421\u0414",exp:2,flag:"rs"},RUB:{name:"Russian Rouble",symbol:"\u20bd",exp:2,flag:"ru"},RWF:{name:"Rwandan franc",symbol:"FRw, RF, R\u20a3",exp:0,flag:"rw"},SAR:{name:"Saudi Arabian Riyal",symbol:"\u0631.\u0633",exp:2,flag:"sa"},SBD:{name:"Solomon Islander Dollar",symbol:"SI$",exp:2,flag:"sb"},SCR:{name:"Seychellois Rupee",symbol:"Rs",exp:2,flag:"sc"},SDG:{name:"Sudanese Pound",symbol:"SDG",exp:2,flag:"sd"},SEK:{name:"Swedish krona",symbol:"kr",exp:2,flag:"se"},SGD:{name:"Singapore Dollar",symbol:"$",exp:2,flag:"sg"},SLL:{name:"Sierra Leonean Leone",symbol:"Le",exp:2,flag:"sl"},SOS:{name:"Somali Shilling",symbol:"S",exp:2,flag:"so"},SRD:{name:"Surinamese dollar",symbol:"$",exp:2,flag:"sr"},SYP:{name:"Syrian Pound",symbol:"\xa3",exp:2,flag:"sy"},SZL:{name:"Swazi Lilangeni",symbol:"L or E",exp:2,flag:"sz"},THB:{name:"Thai Baht",symbol:"\u0e3f",exp:2,flag:"th"},TJS:{name:"Tajikistani somoni",symbol:"TJS",exp:2,flag:"tj"},TMT:{name:"Turkmenistan manat",symbol:"T",exp:2,flag:"tm"},TND:{name:"Tunisian Dinar",symbol:"TND",exp:3,flag:"tn"},TOP:{name:"Tongan Pa'anga",symbol:"T$",exp:2,flag:"to"},TRY:{name:"Turkish Lira",symbol:"\u20ba",exp:2,flag:"tr"},TTD:{name:"Trinidadian dollar",symbol:"TT$",exp:2,flag:"tt"},TWD:{name:"Taiwan New Dollar",symbol:"NT$",exp:2,flag:"tw"},TZS:{name:"Tanzanian Shilling",symbol:"Sh",exp:2,flag:"tz"},UAH:{name:"Ukrainian Hryvnia",symbol:"\u20b4",exp:2,flag:"ua"},UGX:{name:"Ugandan Shilling",symbol:"USh",exp:0,flag:"ug"},USD:{name:"US Dollar",symbol:"$",exp:2,flag:"us"},UYU:{name:"Uruguayan peso",symbol:"$U",exp:2,flag:"uy"},UZS:{name:"Uzbekistani som",symbol:"\u043b\u0432",exp:2,flag:"uz"},VEF:{name:"Venezuelan bolivar",symbol:"Bs",exp:2,flag:"ve"},VND:{name:"Vietnamese Dong",symbol:"\u20ab",exp:0,flag:"vn"},VUV:{name:"Vanuatu Vatu",symbol:"VT",exp:0,flag:"vu"},WST:{name:"Samoan T\u0101l\u0101",symbol:"$",exp:2,flag:"ws"},YER:{name:"Yemeni Rial",symbol:"YER",exp:2,flag:"ye"},ZAR:{name:"South African Rand",symbol:"R",exp:2,flag:"za"},ZMW:{name:"Zambian Kwacha",symbol:"ZMK",exp:2,flag:"zm"},ZWD:{name:"Zimbabwean Dollar",symbol:"Z$",exp:2,flag:"zw"},XAU:{name:"Gold, troy ounce",symbol:"XAU",exp:2}},G={defaultBase:"USD",options:function(){return Object.keys(U).map(function(e){return{key:e,value:e,flag:U[e].flag,text:"".concat(e,", ").concat(U[e].name)}})},name:function(e){return U[e].name},symbol:function(e){return U[e].symbol},minAmount:function(e){return Number("1e-".concat(U[e].exp))},numberToCents:function(e,t){return Math.round(parseFloat("".concat(e,"e").concat(U[t].exp)))},centsToNumber:function(e,t){var n=U[t].exp;return Number("".concat(e,"e-").concat(n))},centsToString:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=U[t].exp,r=Number("".concat(e,"e-").concat(a));return n?r.toLocaleString(void 0,{minimumFractionDigits:a,maximumFractionDigits:a}):r.toString()},convert:function(e,t,n,a){return e/t*Math.pow(10,U[n].exp-U[a].exp)}},B=function(e){return e.settings.exchangeRate},K=function(e){return e.settings.currency.base},Y=function(e){return G.symbol(e.settings.currency.base)},W=function(e){return e.settings.currency.secondary},H=function(e){return e.settings.collapsedSections},z=(n(379),Object(d.b)(function(e,t){return Object(b.a)({},t,{collapsed:H(e)})},{toggle:L})(function(e){var t=e.name,n=e.label,a=e.LabelComponent,r=e.collapsed,c=e.toggle,o=e.children;return s.a.createElement("div",{className:"section"},s.a.createElement("div",{className:r.includes(t)?"section__header":"section__header active",onClick:function(){return c(t)}},s.a.createElement(w.a,{name:"dropdown"}),s.a.createElement("h3",null,n),a&&s.a.createElement(a,null)),!r.includes(t)&&s.a.createElement("div",{className:"section__body"},o))})),V=n(33),$=n(61),J=n(10);!function(e){e.Cash="cash",e.Bank="bank",e.Deposit="deposit",e.Credit="credit",e.Asset="asset"}(r||(r={})),function(e){e[e.Archive=0]="Archive",e[e.Cleanup=1]="Cleanup",e[e.Move=2]="Move"}(c||(c={}));var q=(a={},Object(J.a)(a,r.Cash,"Cash"),Object(J.a)(a,r.Bank,"Bank Account"),Object(J.a)(a,r.Deposit,"Deposit"),Object(J.a)(a,r.Credit,"Credit"),Object(J.a)(a,r.Asset,"Asset"),a),Q=r.Cash,Z=c.Archive;function X(e){return q[e]}function ee(e){var t=e.id,n=e.balance,a=e.name,r=e.group,c=e.currencies,o=e.on_dashboard,i=e.archived;return{id:t||"A".concat(Date.now()),balance:Object.keys(n).reduce(function(e,t){return e[t]=G.numberToCents(""!==n[t]?n[t]:"0",t),e},{}),name:a,group:r,currencies:c,on_dashboard:o,archived:i}}function te(e){return Object(b.a)({},e,{balance:Object.keys(e.balance).reduce(function(t,n){return t[n]=G.centsToString(e.balance[n],n,!1),t},{})})}function ne(e){return{id:e._id,name:e.name,group:e.group,balance:e.balance,currencies:e.currencies,on_dashboard:e.on_dashboard,archived:e.archived}}function ae(e){return{name:e.name,group:e.group,balance:e.balance,currencies:e.currencies,on_dashboard:e.on_dashboard,archived:e.archived}}var re,ce,oe={fromArray:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return oe.merge({byKey:{},keys:[]},e,t)},merge:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return{byKey:Object(b.a)({},e.byKey,t.reduce(function(e,t){return e[t[n]]=t,e},{})),keys:Object(m.a)(new Set(t.map(function(e){return e[n]}).filter(function(t){return!e.keys.includes(t)}).concat(e.keys)))}},set:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return oe.merge(e,[t],n)},remove:function(e,t){if(!e.byKey||!e.byKey[t])return e;var n=e.keys.filter(function(e){return e!==t});return{byKey:n.reduce(function(t,n){return t[n]=e.byKey[n],t},{}),keys:n}},get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.byKey&&e.byKey[t]||n},map:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.keys.length,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return e.keys.slice(a,a+n).map(function(n){return t(e.byKey[n],n)})},filter:function(e,t){return e.keys.reduce(function(n,a){return t(e.byKey[a],a)&&n.push(e.byKey[a]),n},[])},apply:function(e,t){return{byKey:e.keys.reduce(function(n,a){return n[a]=t(e.byKey[a],a),n},{}),keys:e.keys}}},ie=oe,se=function(e,t){return e.name<t.name?-1:e.name>t.name?1:0},ue=function(e){return e.entities.accounts},le=function(e){return Object(V.createSelector)(pe,function(t){return t.find(function(t){return t.name===e})})},pe=function(e){return ie.map(e.entities.accounts,function(e){return Object(b.a)({},e)}).sort(se)},de=Object(V.createSelector)(pe,function(e){return e.filter(function(e){return!e.archived})}),me=Object(V.createSelector)(de,function(e){return e.filter(function(e){return e.on_dashboard})}),be=Object(V.createSelector)(pe,function(e){return e.reduce(function(e,t){return e[t.id]=t.name,e},{})}),fe=Object(V.createSelector)(pe,function(e){return e.reduce(function(e,t){return e[t.id]=t.currencies,e},{})}),he=Object(V.createSelector)(pe,function(e){return e.reduce(function(e,t){return e.concat(t.currencies.filter(function(t){return!e.includes(t)}))},[])}),ge=function(e,t,n){for(var a=e.reduce(function(e,a){var r=a.group;return e[r]||(e[r]={name:X(r),accounts:[],total:0}),e[r].accounts.push(a),e[r].total+=Ee(a,t,n),e},{}),r=Object.keys(a),c=0;c<r.length;c++){a[r[c]].accounts.sort(se)}return a},Oe=Object(V.createSelector)(de,K,B,ge),ye=Object(V.createSelector)(me,K,B,ge),ve=(Object(V.createSelector)(pe,K,B,ge),Object(V.createSelector)(Oe,function(e){for(var t=[],n=Object.keys(e),a=0;a<n.length;a++){var r=n[a],c=!0,o=!1,i=void 0;try{for(var s,u=e[r].accounts[Symbol.iterator]();!(c=(s=u.next()).done);c=!0){var l=s.value;t.push({key:l.id,value:l.id,text:l.name,description:X(r)})}}catch(p){o=!0,i=p}finally{try{c||null==u.return||u.return()}finally{if(o)throw i}}}return t})),je=Object(V.createSelector)(pe,K,B,function(e,t,n){return e.reduce(function(e,a){return e+Ee(a,t,n)},0)}),Ee=function(e,t,n){return e.currencies.reduce(function(a,r){return Math.floor(a+G.convert(e.balance[r],n[r],t,r))},0)},xe=function(e){var t=e.value,n=e.code,a=e.showColor,r=void 0===a||a;return s.a.createElement("span",{className:"mono ".concat(r&&(t>=0?"positive":"negative"))},G.centsToString(t,n)," ",n)},Ce=Object(d.b)(function(e){return{netWorth:je(e),baseCurrency:K(e)}})(function(e){var t=e.netWorth,n=e.baseCurrency;return s.a.createElement("div",{className:"net-worth__total"},s.a.createElement(xe,{value:t,code:n}))}),ke=n(615),Se=n(629),Ae=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).handleEditClick=function(){n.props.openAccountInModal(te(n.props.account))},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"account-widget-account"},s.a.createElement("div",{className:"account-widget-account__name"},s.a.createElement(ke.a,{to:"/transactions/".concat(this.props.account.id)},this.props.account.name)),s.a.createElement("div",{className:"account-widget-account__balance"},this.props.account.currencies.map(function(t){return s.a.createElement(xe,{key:t,value:e.props.account.balance[t],code:t})})),this.props.openAccountInModal&&s.a.createElement("div",{className:"account-widget-account__edit"},s.a.createElement(Se.a,{basic:!0,circular:!0,icon:"pencil",onClick:this.handleEditClick})))}}]),t}(s.a.Component),Te=function(e){var t=e.baseCurrency,n=e.group,a=e.isCollapsed,r=e.toggleGroupCollapse,c=e.openAccountInModal;return s.a.createElement("div",{className:"account-widget-group"},s.a.createElement("div",{className:"account-widget-group__header",onClick:r},s.a.createElement("span",{className:"account-widget-group__name"},n.name),s.a.createElement("span",{className:"account-widget-group__total"},s.a.createElement(xe,{value:n.total,code:t}))),!a&&n.accounts.map(function(e){return s.a.createElement(Ae,{key:e.id,account:e,openAccountInModal:c})}))},we=(n(462),function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).toggle=function(e){return function(){return n.props.toggleSectionCollapse(e)}},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.groups);return t.length>0&&s.a.createElement("div",{className:"account-widget"},t.map(function(t){return s.a.createElement(Te,{key:t,baseCurrency:e.props.baseCurrency,group:e.props.groups[t],isCollapsed:e.props.collapsedGroups.includes(t),toggleGroupCollapse:e.toggle(t),openAccountInModal:e.props.openAccountInModal})}))}}]),t}(s.a.Component)),Re=Object(d.b)(function(e,t){return Object(b.a)({},t,{baseCurrency:K(e),collapsedGroups:H(e),groups:ye(e)})},{toggleSectionCollapse:L})(we),Ne=n(633),_e=n(623),Ie=n(625),De=n(619),Me=n(37),Fe=n.n(Me),Le=(new Date).getTimezoneOffset();function Pe(e){return(e instanceof Date?e.getTime():e)-60*Le*1e3}function Ue(e){return(e instanceof Date?e.getTime():e)+60*Le*1e3}!function(e){e[e.Expense=0]="Expense",e[e.Transfer=1]="Transfer",e[e.Income=2]="Income"}(ce||(ce={}));var Ge=ce,Be=Ge.Expense,Ke=Ge.Transfer,Ye=Ge.Income,We=(re={},Object(J.a)(re,Be,"Expense"),Object(J.a)(re,Ke,"Transfer"),Object(J.a)(re,Ye,"Income"),re),He=Be,ze=5;function Ve(e){return We[e]}function $e(e){var t=e.tags&&e.tags[e.kind];return Object(b.a)({},e,{id:e.id||"",amount:G.numberToCents(parseFloat(e.amount)*(e.kind===Be?-1:1),e.currency),linkedAmount:e.kind===Ke&&e.linkedCurrency&&e.linkedAmount?G.numberToCents(e.linkedAmount,e.linkedCurrency):void 0,note:e.note||void 0,tags:t&&t.length>0?t:void 0,date:new Date(e.date).getTime()})}function Je(e){var t=e._id,n=e.kind,a=e.note,r=e.tags,c=e.accountId,o=e.amount,i=e.currency,s=e.linkedAccountId,u=e.linkedAmount,l=e.linkedCurrency;if(!t)throw new Error('Transaction storage object missing "_id"');var p=t.match(/T([0-9]+)-/);if(!p)throw new Error('No date in Transaction ID "'.concat(t,'"'));return{id:t,date:parseInt(p[1],10),kind:n,note:a,tags:r,accountId:c,amount:o,currency:i,linkedAccountId:s,linkedAmount:u,linkedCurrency:l}}function qe(e){var t=e.kind,n=e.note,a=e.tags,r=e.accountId,c=e.amount,o=e.currency,i=e.linkedAccountId,s=e.linkedAmount,u=e.linkedCurrency;return Object(b.a)({kind:t,note:n,tags:a,accountId:r,amount:c,currency:o},t===Ke&&{linkedAccountId:i,linkedAmount:s,linkedCurrency:u})}var Qe=n(6),Ze=n.n(Qe),Xe=(Ze.a.shape({key:Ze.a.string,value:Ze.a.string,text:Ze.a.string}),n(630)),et=function(e){var t=e.withTransfer,n=e.activeKind,a=e.changeKind,r=ce.Expense,c=ce.Transfer,o=ce.Income,i=t?[r,c,o]:[r,o];return s.a.createElement(Xe.a,{attached:"top",widths:i.length},i.map(function(e){return s.a.createElement(Xe.a.Item,{key:e,color:e===r?"red":e===o?"green":"black",name:Ve(e),active:e===n,onClick:function(){return a(e)}})}))},tt=function(e){return s.a.createElement(_e.a.Group,null,s.a.createElement(_e.a.Field,{width:11,className:"mobile-with-margin"},s.a.createElement("label",null,e.label),s.a.createElement(Ie.a,{selection:!0,options:e.accountOptions,value:e.accountId,onChange:e.onAccountChange})),s.a.createElement(_e.a.Field,{width:5,className:"mobile-with-margin input-right no-label"},s.a.createElement(De.a,{required:!0,type:"number",min:G.minAmount(e.currency),step:G.minAmount(e.currency),value:e.amount,onChange:e.onAmountChange,labelPosition:"right",label:1===e.currencyOptions.length?e.currencyOptions[0].text:s.a.createElement(Ie.a,{options:e.currencyOptions,value:e.currency,onChange:e.onCurrencyChange})})))},nt=(n(497),ce.Expense,ce.Transfer),at=ce.Income,rt=function(){return s.a.createElement("div",{className:"transactions-form__empty"},"You don't have any accounts.")},ct=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={searchQuery:""},n.onSubmit=function(e){e.preventDefault(),n.props.saveTransaction($e(n.props.form))},n.onChange=function(e){return function(t,n){var a=n.value;return e(a)}},n.onAccountChange=function(e){return function(t,a){var r=a.value;e({accountId:r,currency:n.props.accountCurrency[r]})}},n.onTagAdd=function(e,t){var a=t.value;n.props.addTag({kind:n.props.form.kind,tag:a})},n.onTagSearchChange=function(e,t){var a=t.searchQuery;return n.setState({searchQuery:a})},n.onTagClose=function(){return n.setState({searchQuery:""})},n.getCurrencyOptions=function(e){return n.props.accountCurrency[e].map(function(e){return{key:e,value:e,text:e}})},n.getGridClassName=function(){return n.props.form.kind===nt?"transaction-form-grid single-line":"transaction-form-grid"},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return this.props.form.accountId?s.a.createElement(s.a.Fragment,null,s.a.createElement(et,{withTransfer:!!this.props.form.linkedAccountId,activeKind:this.props.form.kind,changeKind:this.props.changeKind}),s.a.createElement(Ne.a,{attached:"bottom"},s.a.createElement(_e.a,{onSubmit:this.onSubmit,className:"transaction-form"},s.a.createElement(tt,{label:this.props.form.kind===at?"To":"From",accountId:this.props.form.accountId,amount:this.props.form.amount,currency:this.props.form.currency,accountOptions:this.props.accountOptions,currencyOptions:this.getCurrencyOptions(this.props.form.accountId),onAccountChange:this.onAccountChange(this.props.changeAccount),onAmountChange:this.onChange(this.props.changeAmount),onCurrencyChange:this.onChange(this.props.changeCurrency)}),this.props.form.kind===nt&&s.a.createElement(tt,{label:"To",accountId:this.props.form.linkedAccountId,amount:this.props.form.linkedAmount,currency:this.props.form.linkedCurrency,accountOptions:this.props.accountOptions,currencyOptions:this.getCurrencyOptions(this.props.form.linkedAccountId),onAccountChange:this.onAccountChange(this.props.changeLinkedAccount),onAmountChange:this.onChange(this.props.changeLinkedAmount),onCurrencyChange:this.onChange(this.props.changeLinkedCurrency)}),s.a.createElement("div",{className:this.getGridClassName()},s.a.createElement("div",{className:"transaction-form-grid__column-wide"},this.props.form.kind!==nt&&s.a.createElement("div",{className:"transaction-form-grid__field"},s.a.createElement(_e.a.Field,null,s.a.createElement("label",null,"Tags"),s.a.createElement(Ie.a,{multiple:!0,selection:!0,search:!0,allowAdditions:!0,closeOnChange:!0,placeholder:"Choose existing tags or add new",value:this.props.form.tags[this.props.form.kind],options:this.props.tagsOptions,onChange:this.onChange(this.props.changeTags),onAddItem:this.onTagAdd,onClose:this.onTagClose,onSearchChange:this.onTagSearchChange,searchQuery:this.state.searchQuery}))),s.a.createElement("div",{className:"transaction-form-grid__field"},s.a.createElement(_e.a.Field,null,s.a.createElement(De.a,{placeholder:"Note",value:this.props.form.note,onChange:this.onChange(this.props.changeNote)})))),s.a.createElement("div",{className:"transaction-form-grid__column-narrow"},s.a.createElement("div",{className:"transaction-form-grid__field"},s.a.createElement(_e.a.Field,null,s.a.createElement(De.a,{required:!0,fluid:!0,type:"date",value:this.props.form.date,onChange:this.onChange(this.props.changeDate)}))),s.a.createElement("div",{className:"transaction-form-grid__field"},s.a.createElement(Se.a,{primary:!0,fluid:!0,disabled:0===parseFloat(this.props.form.amount)},this.props.form.id?"Save":"Add"," ",Ve(this.props.form.kind)))))))):s.a.createElement(rt,null)}}]),t}(s.a.Component),ot=function(e){return e.entities.tags[e.ui.form.transaction.kind].map(function(e){return{key:e,value:e,text:e}})},it=function(e){return Object(m.a)(new Set(Object(m.a)(e.entities.tags[ce.Expense]).concat(Object(m.a)(e.entities.tags[ce.Income])))).map(function(e){return{key:e,value:e,text:e}})},st=Object(R.a)("LOAD_FILTER_TRANSACTIONS","LOAD_FILTER_TRANSACTIONS_SUCCESS","LOAD_RECENT_TRANSACTIONS","LOAD_RECENT_TRANSACTIONS_SUCCESS","SAVE_TRANSACTION","SAVE_TRANSACTION_SUCCESS","REMOVE_TRANSACTION","REMOVE_TRANSACTION_SUCCESS"),ut=st.loadFilterTransactions,lt=st.loadFilterTransactionsSuccess,pt=st.loadRecentTransactions,dt=st.loadRecentTransactionsSuccess,mt=st.saveTransaction,bt=st.saveTransactionSuccess,ft=st.removeTransaction,ht=st.removeTransactionSuccess,gt=Object(R.a)("LOAD_TAGS","LOAD_EXPENSE_TAGS_SUCCESS","LOAD_INCOME_TAGS_SUCCESS"),Ot=gt.loadTags,yt=gt.loadExpenseTagsSuccess,vt=gt.loadIncomeTagsSuccess,jt=Object(R.a)("FILL_IN_TRANSACTION_FORM","RESET_TRANSACTION_FORM","OPEN_TRANSACTION_IN_MODAL","CHANGE_KIND","CHANGE_ACCOUNT","CHANGE_AMOUNT","CHANGE_CURRENCY","CHANGE_LINKED_ACCOUNT","CHANGE_LINKED_AMOUNT","CHANGE_LINKED_CURRENCY","CHANGE_DATE","ADD_TAG","CHANGE_TAGS","CHANGE_NOTE"),Et=jt.fillInTransactionForm,xt=jt.resetTransactionForm,Ct=jt.openTransactionInModal,kt=jt.changeKind,St=jt.changeAccount,At=jt.changeAmount,Tt=jt.changeCurrency,wt=jt.changeLinkedAccount,Rt=jt.changeLinkedAmount,Nt=jt.changeLinkedCurrency,_t=jt.changeDate,It=jt.addTag,Dt=jt.changeTags,Mt=jt.changeNote,Ft=Object(d.b)(function(e){return{form:e.ui.form.transaction,accountCurrency:fe(e),accountOptions:ve(e),tagsOptions:ot(e)}},{changeKind:kt,changeAccount:St,changeAmount:At,changeCurrency:Tt,changeLinkedAccount:wt,changeLinkedAmount:Rt,changeLinkedCurrency:Nt,changeDate:_t,changeNote:Mt,addTag:It,changeTags:Dt,loadTags:Ot,saveTransaction:mt})(ct),Lt=n(293),Pt=(ce.Expense,ce.Transfer),Ut=ce.Income,Gt=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).handleEditClick=function(){n.props.openTransactionInModal(function(e){var t;return Object(b.a)({},e,{amount:G.centsToString(e.amount*(e.kind===Be?-1:1),e.currency,!1),linkedAmount:e.kind===Ke&&e.linkedAmount&&e.linkedCurrency?G.centsToString(e.linkedAmount,e.linkedCurrency,!1):void 0,note:e.note||"",tags:(t={},Object(J.a)(t,Be,[]),Object(J.a)(t,Ye,[]),Object(J.a)(t,e.kind,e.tags||[]),t),date:Fe()(Ue(e.date),"YYYY-MM-DD")})}(n.props.transaction))},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.transaction;return s.a.createElement("div",{className:"transaction-item"},s.a.createElement("div",{className:"transaction-item__date"},Fe()(Ue(e.date),"DD MMM")),s.a.createElement("div",{className:"transaction-item__info"},e.accountName,this.renderArrow(),e.kind===Pt&&e.linkedAccountName,e.tags&&e.tags.map(function(e){return s.a.createElement(Lt.a,{key:e,content:e})}),s.a.createElement("span",{className:"transaction-item__info__note"},e.note)),s.a.createElement("div",{className:"transaction-item__amount"},s.a.createElement(xe,{value:e.amount,code:e.currency,showColor:e.kind!==Pt}),e.kind===Pt&&this.renderLinkedAmount()),s.a.createElement("div",{className:"transaction-item__edit"},s.a.createElement(Se.a,{circular:!0,basic:!0,icon:"pencil",onClick:this.handleEditClick,disabled:e.archived})))}},{key:"renderArrow",value:function(){var e=this.props.transaction,t=e.kind,n=e.tags,a=e.note;if(t===Pt||n||a)return s.a.createElement(w.a,{color:"grey",name:t===Ut?"arrow left":"arrow right"})}},{key:"renderLinkedAmount",value:function(){var e=this.props.transaction,t=e.linkedAmount,n=e.linkedCurrency,a=e.currency;if(n&&n!==a)return s.a.createElement("span",null,s.a.createElement(w.a,{color:"grey",name:"arrow right"}),s.a.createElement(xe,{value:t,code:n,showColor:!1}))}}]),t}(s.a.Component),Bt=n(624),Kt=n(636),Yt=function(e){return s.a.createElement(Bt.a,{closeIcon:!0,size:"small",className:"transaction",open:e.isOpen,onClose:e.resetTransactionForm},s.a.createElement(Kt.a,{icon:"file text outline",content:e.isEdit?"Edit Transaction":"New Transaction"}),s.a.createElement(Bt.a.Content,null,s.a.createElement(e.EditForm,null)),e.isEdit&&s.a.createElement(Bt.a.Actions,null,s.a.createElement(Se.a,{negative:!0,icon:"trash",content:"Delete",labelPosition:"right",onClick:function(){return e.removeTransaction(e.currentTransactionId)}})))},Wt=(n(548),function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).renderTransaction=function(e){return s.a.createElement(Gt,{key:e.id,transaction:e,openTransactionInModal:n.props.openTransactionInModal})},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return s.a.createElement(Ne.a,{className:"transactions-list__wrapper"},s.a.createElement(C.a,{inverted:!0,active:this.props.isLoading},s.a.createElement(k.a,{active:!0,inline:"centered"})),this.props.transactions.length>0?this.props.transactions.map(this.renderTransaction):s.a.createElement("div",{className:"transactions-list__empty"},"No transactions found."),s.a.createElement(Yt,{currentTransactionId:this.props.currentTransactionId,EditForm:this.props.EditForm,isOpen:this.props.isModalOpen,isEdit:this.props.isEdit,resetTransactionForm:this.props.resetTransactionForm,removeTransaction:this.props.removeTransaction}))}}]),t}(s.a.Component)),Ht=function(e){var t=Ue(e.ui.transaction.filter.dateStart),n=Ue(e.ui.transaction.filter.dateEnd);return Fe()(t,"DD MMM")!==Fe()(n,"DD MMM")?"".concat(Fe()(t,"DD MMM")," \u2014 ").concat(Fe()(n,"DD MMM")):Fe()(t,"MMMM, Do")},zt=function(e){return{date:{start:e.ui.transaction.filter.dateStart,end:e.ui.transaction.filter.dateEnd},accounts:new Set(e.ui.transaction.filter.applied.accounts),tags:e.ui.transaction.filter.applied.tags||[]}},Vt=function(e){return e.ui.transaction.filter.page},$t=Object(V.createSelector)(Vt,function(e){return Math.ceil(e.ui.transaction.filter.totalRows/e.ui.transaction.filter.perPage)},function(e){return e.ui.isMobile?5:9},function(e,t,n){for(var a=[],r=Math.max(0,t-e-Math.ceil(n/2)),c=t>n?Math.max(n,t-r):t,o=Math.max(0,c-n);o<c;o++)a.push(o);return a}),Jt=function(e){return e.entities.transactions.filter},qt=Object(V.createSelector)(function(e){return e.entities.transactions.recent},ue,function(e,t){return ie.map(e,function(e){return Zt(e,t)},ze)}),Qt=Object(V.createSelector)(Jt,Vt,ue,function(e,t,n){return ie.map(e,function(e){return Zt(e,n)},10,10*t)});function Zt(e,t){var n=ie.get(t,e.accountId),a=ie.get(t,e.linkedAccountId);return Object(b.a)({},e,{archived:n.archived||a.archived,accountName:n.name,linkedAccountName:a.name})}var Xt=function(e){return Object(V.createSelector)(Jt,K,B,function(t,n,a){return ie.filter(t,function(t){return t.kind===e}).reduce(function(e,t){return Math.floor(e+G.convert(t.amount,a[t.currency],n,t.currency))},0)})},en=ce.Expense,tn=ce.Income,nn=function(e){return e.ui.form.transaction},an=Object(V.createSelector)(ve,function(e){return e.length>0&&e[0].key}),rn=Object(V.createSelector)(an,fe,K,function(e,t,n){return e&&(t[e].includes(n)?n:t[e][0])}),cn=Object(V.createSelector)(ve,an,fe,function(e,t,n){return e.length>1?e[1].key:t&&n[t].length>1&&t}),on=Object(V.createSelector)(an,cn,fe,K,function(e,t,n,a){return e&&e===t?n[e][1]:t&&(n[t].includes(a)?a:n[t][0])}),sn=Object(V.createSelector)(an,rn,cn,on,function(e,t,n,a){var r;return{kind:He,isModalOpen:!1,accountId:e||null,currency:t||null,amount:"",linkedAccountId:n||null,linkedCurrency:a||null,linkedAmount:"",tags:(r={},Object(J.a)(r,en,[]),Object(J.a)(r,tn,[]),r),date:Fe()(new Date,"YYYY-MM-DD"),note:""}}),un=Object(d.b)(function(e){return{currentTransactionId:nn(e).id,transactions:qt(e),isModalOpen:nn(e).isModalOpen,isEdit:void 0!==nn(e).id,EditForm:Ft}},{openTransactionInModal:Ct,resetTransactionForm:xt,removeTransaction:ft})(Wt),ln=Object(R.a)("LOAD_ACCOUNTS","LOAD_ACCOUNTS_SUCCESS","SAVE_ACCOUNT","SAVE_ACCOUNT_FAILURE","SAVE_ACCOUNT_SUCCESS","UPDATE_ACCOUNT","REMOVE_ACCOUNT","REMOVE_ACCOUNT_REQUEST","REMOVE_ACCOUNT_START","REMOVE_ACCOUNT_ITEM_PROCESSED","REMOVE_ACCOUNT_FAILURE","REMOVE_ACCOUNT_SUCCESS"),pn=ln.loadAccounts,dn=ln.loadAccountsSuccess,mn=ln.saveAccount,bn=ln.saveAccountFailure,fn=ln.saveAccountSuccess,hn=ln.updateAccount,gn=ln.removeAccount,On=ln.removeAccountRequest,yn=ln.removeAccountStart,vn=ln.removeAccountItemProcessed,jn=ln.removeAccountFailure,En=ln.removeAccountSuccess,xn=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.loadTags(),this.props.loadAccounts(),this.props.loadRecentTransactions()}},{key:"render",value:function(){return s.a.createElement("div",{className:"container-full-page"},s.a.createElement(T.a,null,s.a.createElement(T.a.Row,null,s.a.createElement(T.a.Column,{computer:6,mobile:16},s.a.createElement(z,{name:"net_worth",label:"Net Worth",LabelComponent:Ce},s.a.createElement(Re,null))),s.a.createElement(T.a.Column,{computer:10,mobile:16},s.a.createElement(z,{name:"add_tx",label:"New Transaction"},s.a.createElement(Ft,null)),s.a.createElement(z,{name:"recent_tx",label:"Recent Transactions"},s.a.createElement(un,null))))))}}]),t}(s.a.Component),Cn=Object(d.b)(void 0,{loadTags:Ot,loadAccounts:pn,loadRecentTransactions:pt})(xn),kn=Object(d.b)(function(e){return{currentTransactionId:nn(e).id,isLoading:e.ui.transaction.filter.isLoading,transactions:Qt(e),isModalOpen:nn(e).isModalOpen,isEdit:void 0!==nn(e).id,EditForm:Ft}},{openTransactionInModal:Ct,resetTransactionForm:xt,removeTransaction:ft})(Wt),Sn=n(215),An=n.n(Sn),Tn=(n(556),(new Date).getFullYear()),wn=new Date(Tn-8,0),Rn=new Date(Tn+2,11);function Nn(e){for(var t=e.date,n=e.localeUtils,a=e.onChange,r=n.getMonths(),c=[],o=wn.getFullYear();o<=Rn.getFullYear();o+=1)c.push(o);var i=function(e){var t=e.target.form,n=t.year,r=t.month;a(new Date(n.value,r.value))};return s.a.createElement("form",{className:"DayPicker-Caption"},s.a.createElement("select",{name:"month",onChange:i,value:t.getMonth()},r.map(function(e,t){return s.a.createElement("option",{key:t,value:t},e)})),s.a.createElement("select",{name:"year",onChange:i,value:t.getFullYear()},c.map(function(e,t){return s.a.createElement("option",{key:t,value:e},e)})))}var _n,In,Dn=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={month:null,from:null,to:null},n.handleDayClick=function(e){var t=Sn.DateUtils.addDayToRange(e,n.state);n.setState(t)},n.handleYearMonthChange=function(e){n.setState({month:e})},n.handleResetClick=function(){n.setState({month:null,from:null,to:null})},n.handleApplyClick=function(){var e=n.state,t=e.from,a=e.to;n.props.changeFilterDate({dateStart:t.setHours(0,0,0),dateEnd:a&&a.setHours(23,59,59)||t.setHours(23,59,59)}),n.props.toggleFilterCalendar()},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state,t=e.month,n=e.from,a=e.to;return s.a.createElement(Bt.a,{open:this.props.isCalendarOpen,onClose:this.props.toggleFilterCalendar,className:"transactions-filter-modal",closeIcon:!0,size:"small"},s.a.createElement(Bt.a.Header,null,"Show transactions in range"),s.a.createElement(Bt.a.Content,null,s.a.createElement(An.a,{className:"Range",fixedWeeks:!0,enableOutsideDays:!0,numberOfMonths:this.props.isMobile?1:2,selectedDays:[n,{from:n,to:a}],month:t,captionElement:s.a.createElement(Nn,{onChange:this.handleYearMonthChange}),onDayClick:this.handleDayClick})),s.a.createElement(Bt.a.Actions,null,s.a.createElement(Se.a,{content:"Reset",onClick:this.handleResetClick}),s.a.createElement(Se.a,{content:"Apply",onClick:this.handleApplyClick,positive:!0,disabled:null===this.state.from&&null===this.state.to})))}}]),t}(s.a.Component),Mn=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(g.a)(this,Object(O.a)(t).call(this,e))).handleAccountChange=function(e,t){var a=t.value;return n.setState({accounts:a})},n.handleTagsChange=function(e,t){var a=t.value;return n.setState({tags:a})},n.handleResetClick=function(){n.setState({accounts:[],tags:[]})},n.handleApplyClick=function(){n.props.applyFilters(n.state),n.props.toggleFilterModal()},n.state={accounts:n.props.appliedAccounts,tags:n.props.appliedTags},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.appliedAccounts,n=e.appliedTags;this.setState({accounts:t,tags:n})}},{key:"render",value:function(){return s.a.createElement(Bt.a,{open:this.props.isFilterModalOpen,onClose:this.props.toggleFilterModal,closeIcon:!0,size:"tiny"},s.a.createElement(Bt.a.Header,null,"Filter transactions"),s.a.createElement(Bt.a.Content,null,s.a.createElement(_e.a,null,s.a.createElement(_e.a.Group,{widths:"equal"},s.a.createElement(_e.a.Field,null,s.a.createElement("label",null,"Account"),s.a.createElement(Ie.a,{multiple:!0,selection:!0,search:!0,closeOnChange:!0,onChange:this.handleAccountChange,options:this.props.accountOptions,value:this.state.accounts}))),s.a.createElement(_e.a.Group,{widths:"equal"},s.a.createElement(_e.a.Field,null,s.a.createElement("label",null,"Tags"),s.a.createElement(Ie.a,{multiple:!0,selection:!0,search:!0,closeOnChange:!0,onChange:this.handleTagsChange,options:this.props.tagsOptions,value:this.state.tags}))))),s.a.createElement(Bt.a.Actions,null,s.a.createElement(Se.a,{content:"Reset",onClick:this.handleResetClick}),s.a.createElement(Se.a,{content:"Apply",onClick:this.handleApplyClick,positive:!0})))}}]),t}(s.a.Component),Fn=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).removeAppliedAccount=function(e){return function(){n.props.applyFilters({accounts:n.props.appliedAccounts.filter(function(t){return t!==e}),tags:n.props.appliedTags})}},n.removeAppliedTag=function(e){return function(){n.props.applyFilters({accounts:n.props.appliedAccounts,tags:n.props.appliedTags.filter(function(t){return t!==e})})}},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return 0===this.props.appliedAccounts.length&&0===this.props.appliedTags.length?null:s.a.createElement("div",{className:"transactions-filters-applied"},this.props.appliedAccounts.map(function(t){return s.a.createElement(Lt.a,{key:t,content:e.props.accountNameMap[t],icon:"credit card",onRemove:e.removeAppliedAccount(t)})}),this.props.appliedTags.map(function(t){return s.a.createElement(Lt.a,{key:t,content:t,icon:"tag",onRemove:e.removeAppliedTag(t)})}))}}]),t}(s.a.Component),Ln=n(316),Pn=n.n(Ln),Un=n(166),Gn=n.n(Un),Bn=n(110),Kn=n.n(Bn),Yn=n(317),Wn=n.n(Yn),Hn=n(318),zn=n.n(Hn),Vn=n(162),$n=n.n(Vn);function Jn(e){return function(){return Pn()(Gn()(),e)}}!function(e){e[e.today=0]="today",e[e.yesterday=1]="yesterday",e[e.lastWeek=2]="lastWeek",e[e.lastMonth=3]="lastMonth",e[e.thisMonth=4]="thisMonth",e[e.custom=5]="custom"}(In||(In={}));var qn=Jn(7),Qn=Jn(30),Zn=(_n={},Object(J.a)(_n,In.today,{text:"Today",start:Gn.a,end:Kn.a}),Object(J.a)(_n,In.yesterday,{text:"Yesterday",start:Wn.a,end:zn.a}),Object(J.a)(_n,In.lastWeek,{text:"Last 7 days",start:qn,end:Kn.a}),Object(J.a)(_n,In.lastMonth,{text:"Last 30 days",start:Qn,end:Kn.a}),Object(J.a)(_n,In.thisMonth,{text:"This month",start:function(){var e=new Date;return $n()(e)},end:Kn.a}),Object(J.a)(_n,In.custom,{text:"Custom date",start:Gn.a,end:Kn.a}),_n),Xn=In.lastWeek,ea=Zn[Xn].start,ta=Zn[Xn].end;function na(e){return Zn[e].end()}n(560);var aa=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).options=Object.entries(Zn).map(function(e){var t=Object($.a)(e,2),n=t[0],a=t[1].text;return{key:n,value:parseInt(n),text:a}}),n.lastValue=Xn,n.handleDateRange=function(e,t){var a,r=t.value;r!==n.lastValue&&(r===In.custom?n.props.toggleFilterCalendar():(n.props.changeFilterDate({dateStart:(a=r,Zn[a].start()),dateEnd:na(r)}),n.lastValue=r))},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"container-header"},s.a.createElement(Se.a.Group,{basic:!0,fluid:!0},s.a.createElement(Se.a,{icon:"plus",labelPosition:"left",content:"New",onClick:function(){return e.props.openTransactionInModal(Object(b.a)({},e.props.selectedAccount?{accountId:e.props.selectedAccount}:{}))}}),s.a.createElement(Ie.a,{button:!0,className:"icon",options:this.options,defaultValue:Xn,onChange:this.handleDateRange,text:this.props.dateRangeLabel,labeled:!0,icon:"calendar"}),s.a.createElement(Se.a,{icon:"filter",onClick:this.props.toggleFilterModal})),s.a.createElement(Dn,this.props),s.a.createElement(Mn,this.props)),s.a.createElement(Fn,this.props))}}]),t}(s.a.Component),ra=Object(R.a)("CHANGE_FILTER_DATE","TOGGLE_FILTER_CALENDAR","CHANGE_FILTER_PAGE","TOGGLE_FILTER_MODAL","APPLY_FILTERS"),ca=ra.changeFilterDate,oa=ra.toggleFilterCalendar,ia=ra.changeFilterPage,sa=ra.toggleFilterModal,ua=ra.applyFilters,la=Object(d.b)(function(e){return{isMobile:e.ui.isMobile,dateRangeLabel:Ht(e),isCalendarOpen:e.ui.transaction.filter.isCalendarOpen,isFilterModalOpen:e.ui.transaction.filter.isFilterModalOpen,accountOptions:ve(e),accountNameMap:be(e),appliedAccounts:e.ui.transaction.filter.applied.accounts||[],tagsOptions:it(e),appliedTags:e.ui.transaction.filter.applied.tags||[]}},{changeFilterDate:ca,toggleFilterCalendar:oa,toggleFilterModal:sa,applyFilters:ua,openTransactionInModal:Ct})(aa),pa=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).handlePageChange=function(e){return function(){return n.props.changeFilterPage(e)}},n.handlePrevClick=function(){n.props.page>0&&n.props.changeFilterPage(n.props.page-1)},n.handleNextClick=function(){var e=n.props.pages[n.props.pages.length-1];n.props.page<e&&n.props.changeFilterPage(n.props.page+1)},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return this.props.pages.length<2?null:s.a.createElement("div",{className:"transactions-list-pager"},s.a.createElement(Xe.a,{pagination:!0},s.a.createElement(Xe.a.Item,{as:"a",icon:!0,onClick:this.handlePrevClick},s.a.createElement(w.a,{name:"left chevron"})),this.props.pages.map(function(t){return s.a.createElement(Xe.a.Item,{as:"a",key:t,active:t===e.props.page,onClick:e.handlePageChange(t)},t+1)}),s.a.createElement(Xe.a.Item,{as:"a",icon:!0,onClick:this.handleNextClick},s.a.createElement(w.a,{name:"right chevron"}))))}}]),t}(s.a.Component),da=Object(d.b)(function(e){return{page:Vt(e),pages:$t(e)}},{changeFilterPage:ia})(pa),ma=n(627),ba=function(e){var t=e.base,n=e.income,a=e.expense;return s.a.createElement("div",{className:"transactions-list-footer"},s.a.createElement(ma.a,{fixed:!0,basic:"very",unstackable:!0},s.a.createElement(ma.a.Body,null,s.a.createElement(ma.a.Row,null,s.a.createElement(ma.a.Cell,null,"Total income"),s.a.createElement(ma.a.Cell,{textAlign:"right"},s.a.createElement(xe,{code:t,value:n}))),s.a.createElement(ma.a.Row,null,s.a.createElement(ma.a.Cell,null,"Total expense"),s.a.createElement(ma.a.Cell,{textAlign:"right"},s.a.createElement(xe,{code:t,value:a}))),s.a.createElement(ma.a.Row,null,s.a.createElement(ma.a.Cell,null),s.a.createElement(ma.a.Cell,{textAlign:"right"},s.a.createElement(xe,{code:t,value:n+a}))))))},fa=Object(d.b)(function(e){return{base:K(e),income:Xt(ce.Income)(e),expense:Xt(ce.Expense)(e)}})(ba),ha=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(g.a)(this,Object(O.a)(t).call(this,e))).props.applyFilters({accounts:e.match.params.accountId?[e.match.params.accountId]:[]}),n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.loadAccounts(),this.props.loadTags(),this.props.loadFilterTransactions()}},{key:"render",value:function(){return s.a.createElement("div",{className:"container-full-page flat search-page"},s.a.createElement(la,{selectedAccount:this.props.match.params.accountId}),s.a.createElement(kn,null),s.a.createElement(da,null),s.a.createElement(fa,null))}}]),t}(s.a.Component),ga=Object(d.b)(void 0,{loadAccounts:pn,loadTags:Ot,loadFilterTransactions:ut,applyFilters:ua})(ha),Oa=Object(R.a)("FILL_IN_ACCOUNT_FORM","RESET_ACCOUNT_FORM","OPEN_ACCOUNT_IN_MODAL","CHANGE_NAME","CHANGE_GROUP","CHANGE_BALANCE","TOGGLE_CURRENCY","TOGGLE_ON_DASHBOARD"),ya=Oa.fillInAccountForm,va=Oa.resetAccountForm,ja=Oa.openAccountInModal,Ea=Oa.changeName,xa=Oa.changeGroup,Ca=Oa.changeBalance,ka=Oa.toggleCurrency,Sa=Oa.toggleOnDashboard,Aa=function(e){return e.ui.form.account},Ta=function(e){return{isOpen:e.ui.form.account.isModalOpen,isDeleteRequest:e.ui.form.account.isDeleteRequest,isDeleteRunning:e.ui.form.account.isDeleteRunning,itemsToProcess:e.ui.form.account.itemsToProcess,itemsProcessed:e.ui.form.account.itemsProcessed}},wa=n(618),Ra=n(621),Na=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={strategy:Z},n.onStrategyChange=function(e,t){var a=t.value;n.setState(Object(b.a)({},n.state,{strategy:a}))},n.onAccountChange=function(e,t){var a=t.value;n.setState(Object(b.a)({},n.state,{moveTo:a}))},n.onProceed=function(){n.props.removeAccount({id:n.props.form.id,strategy:n.state.strategy,moveTo:n.getMoveTo()})},n.getMoveTo=function(){return n.state.moveTo||n.props.accountOptions.length&&n.props.accountOptions[0].key},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.accountOptions.length>0;return s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",null,'You are about to delete account "',this.props.form.name,'"'),s.a.createElement("p",{style:{marginTop:"1em"}},"What should we do with transactions linked to this account?"),s.a.createElement(_e.a,null,function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[{key:c.Archive,value:c.Archive,text:"Archive account, keep transactions as is"},{key:c.Cleanup,value:c.Cleanup,text:"Delete transactions with account"}];return e&&t.push({key:c.Move,value:c.Move,text:"Move transactions to another account"}),t}(t).map(function(t){return s.a.createElement(_e.a.Field,{key:t.key},s.a.createElement(wa.a,{name:"deleteStrategy",label:t.text,value:t.value,checked:e.state.strategy===t.value,onChange:e.onStrategyChange,disabled:e.props.modal.isDeleteRunning}))}),t&&this.state.strategy===c.Move&&s.a.createElement(_e.a.Field,null,s.a.createElement(Ie.a,{selection:!0,value:this.getMoveTo(),options:this.props.accountOptions,onChange:this.onAccountChange,disabled:this.props.modal.isDeleteRunning})),s.a.createElement(_e.a.Field,null,this.props.modal.isDeleteRunning?s.a.createElement(Ra.a,{value:this.props.modal.itemsProcessed,total:this.props.modal.itemsToProcess}):s.a.createElement(Se.a,{negative:!0,labelPosition:"right",icon:"arrow right",content:"Proceed",onClick:this.onProceed}))))}}]),t}(s.a.Component),_a=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).reset=function(){if(n.props.modal.isDeleteRunning)return!1;n.props.resetAccountForm()},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return s.a.createElement(Bt.a,{closeIcon:!0,size:"small",className:"account-form",open:this.props.modal.isOpen,onClose:this.reset},s.a.createElement(Kt.a,{icon:"file text outline",content:this.props.isEdit?"Edit Account":"New Account"}),s.a.createElement(Bt.a.Content,null,this.props.modal.isDeleteRequest?s.a.createElement(Na,this.props):s.a.createElement(this.props.EditForm,null)),s.a.createElement(Bt.a.Actions,null,this.renderModalActions()))}},{key:"renderModalActions",value:function(){if(this.props.isEdit)return this.props.modal.isDeleteRequest?s.a.createElement(Se.a,{labelPosition:"left",disabled:this.props.modal.isDeleteRunning,onClick:this.props.removeAccountRequest,content:"Cancel",icon:"cancel"}):s.a.createElement(Se.a,{negative:!0,labelPosition:"right",onClick:this.props.removeAccountRequest,content:"Delete",icon:"trash"})}}]),t}(s.a.Component),Ia=Object(d.b)(function(e,t){return Object(b.a)({},t,{baseCurrency:K(e),collapsedGroups:H(e),groups:Oe(e)})},{toggleSectionCollapse:L,openAccountInModal:ja})(we),Da=n(617),Ma=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).handleCurrencyChange=function(e,t){var a=t.value;n.props.toggleCurrency(a)},n.handleBalanceChange=function(e){return function(t,a){var r=a.value;n.props.changeBalance({code:e,balance:r})}},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){this.updateCurrencyList(this.props.base,this.props.secondary),this.setInitialCurrencyCheckbox(this.props.base)}},{key:"componentWillReceiveProps",value:function(e){this.updateCurrencyList(e.base,e.secondary),this.setInitialCurrencyCheckbox(e.base)}},{key:"updateCurrencyList",value:function(e,t){this.currencies=[e].concat(Object(m.a)(t))}},{key:"setInitialCurrencyCheckbox",value:function(e){0===this.props.form.currencies.length&&this.props.toggleCurrency(e)}},{key:"render",value:function(){var e=this;return this.currencies.map(function(t){return s.a.createElement(_e.a.Group,{unstackable:!0,key:t,style:{marginBottom:"1em",marginTop:"1em"}},s.a.createElement(_e.a.Field,{className:"checkbox",width:9},s.a.createElement(Da.a,{value:t,label:G.name(t),checked:e.props.form.currencies.includes(t),onChange:e.handleCurrencyChange})),s.a.createElement(_e.a.Field,{className:"input-right",width:7},e.props.form.id?s.a.createElement(xe,{code:t,value:G.numberToCents(e.props.form.balance[t]||0,t)}):s.a.createElement(De.a,{fluid:!0,type:"number",placeholder:"Balance",labelPosition:"right",label:t,step:G.minAmount(t),value:e.props.form.balance[t]||"",onChange:e.handleBalanceChange(t)})))})}}]),t}(s.a.Component),Fa=(n(563),function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(g.a)(this,Object(O.a)(t).call(this,e))).handleNameChange=function(e,t){var a=t.value;return n.props.changeName(a)},n.handleGroupChange=function(e,t){var a=t.value;return n.props.changeGroup(a)},n.handleSubmit=function(e){e.preventDefault(),n.props.saveAccount(ee(n.props.form))},n.groups=Object.entries(q).map(function(e){var t=Object($.a)(e,2),n=t[0];return{key:n,value:n,text:t[1]}}),n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return s.a.createElement(_e.a,{className:"account-form",onSubmit:this.handleSubmit},s.a.createElement(_e.a.Group,null,s.a.createElement(_e.a.Input,{width:9,required:!0,label:"Name",placeholder:"Account name",value:this.props.form.name,onChange:this.handleNameChange}),s.a.createElement(_e.a.Select,{width:7,label:"Group",value:this.props.form.group,options:this.groups,onChange:this.handleGroupChange})),s.a.createElement(Ma,this.props),s.a.createElement(_e.a.Group,{unstackable:!0},s.a.createElement(_e.a.Field,{width:9,style:{paddingTop:"0.5em"}},s.a.createElement(Da.a,{label:"Show on Dashboard",checked:this.props.form.on_dashboard,onChange:this.props.toggleOnDashboard})),s.a.createElement(_e.a.Button,{width:7,primary:!0,fluid:!0,content:"Save Account"})))}}]),t}(s.a.Component)),La=Object(d.b)(function(e){return{form:Aa(e),base:K(e),secondary:W(e)}},{changeName:Ea,changeGroup:xa,changeBalance:Ca,toggleCurrency:ka,toggleOnDashboard:Sa,saveAccount:mn,removeAccount:gn})(Fa),Pa=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){this.props.loadAccounts()}},{key:"render",value:function(){return s.a.createElement("div",{className:"container-full-page flat"},s.a.createElement("div",{className:"container-header"},s.a.createElement(Se.a.Group,{basic:!0},s.a.createElement(Se.a,{icon:"plus",labelPosition:"left",content:"New",onClick:this.props.openAccountInModal}))),s.a.createElement("div",{className:"accounts-list-wrapper"},s.a.createElement(Ia,null)),s.a.createElement(_a,this.props))}}]),t}(s.a.Component),Ua=Object(d.b)(function(e){return{form:Aa(e),modal:Ta(e),isEdit:void 0!==Aa(e).id,accountOptions:ve(e).filter(function(t){return t.key!==Aa(e).id}),EditForm:La}},{loadAccounts:pn,openAccountInModal:ja,resetAccountForm:va,removeAccountRequest:On,removeAccount:gn})(Pa),Ga=Object(R.a)("CHANGE_REPORT_KIND","CHANGE_REPORT_TIMESPAN","CHANGE_REPORT_ACCOUNTS","MOVE_REPORT_DATE_BACKWARDS","MOVE_REPORT_DATE_FORWARDS","LOAD_REPORT","LOAD_REPORT_SUCCESS","LOAD_REPORT_FAILURE"),Ba=Ga.changeReportKind,Ka=Ga.changeReportTimespan,Ya=Ga.changeReportAccounts,Wa=Ga.moveReportDateBackwards,Ha=Ga.moveReportDateForwards,za=Ga.loadReport,Va=Ga.loadReportSuccess,$a=Ga.loadReportFailure,Ja=n(153),qa=n.n(Ja),Qa=n(210),Za=n.n(Qa),Xa=n(321),er=n.n(Xa),tr=n(322),nr=n.n(tr),ar=n(209),rr=n.n(ar),cr=n(323),or=n.n(cr),ir=n(324),sr=n.n(ir),ur=n(122),lr=n.n(ur),pr=n(108),dr=n.n(pr),mr=ce.Expense,br=ce.Income;var fr,hr,gr,Or=ce.Expense,yr=ce.Income;!function(e){e.ExpenseIncome="expense_income",e.ExpenseTags="expense_tags",e.NetWorth="net_worth"}(hr||(hr={})),function(e){e.Yearly="yearly",e.Monthly="monthly"}(gr||(gr={}));var vr=gr,jr=vr.Yearly,Er=vr.Monthly,xr=hr.ExpenseIncome,Cr=jr;function kr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cr;return Rr(new Date,e)}function Sr(e,t){var n=e.start;return Rr(t===jr?sr()(n,1):or()(n,1),t)}function Ar(e,t){var n=e.start;return Rr(t===jr?Za()(n,1):qa()(n,1),t)}var Tr=(fr={},Object(J.a)(fr,hr.ExpenseIncome,function(e,t,n,a){var r=e.timespan===gr.Yearly?dr()(0,12).map(function(e){return Fe()((new Date).setMonth(e),"MMM")}):dr()(1,lr()(e.date.start)+1).map(function(e){return"".concat(e).padStart(2,"0")}),c=[new Array(r.length).fill(0),new Array(r.length).fill(0)],o=!0,i=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var p=u.value;if(p.kind===mr||p.kind===br){var d=Fe()(Pe(p.date),e.timespan===gr.Yearly?"M":"D");c[p.kind===br?0:1][parseInt(d)-1]+=G.convert(Math.abs(p.amount),n[p.currency],a,p.currency)}}}catch(m){i=!0,s=m}finally{try{o||null==l.return||l.return()}finally{if(i)throw s}}return{labels:r,series:c.map(function(e){return e.map(function(e){return Math.floor(G.centsToNumber(e,a))})})}}),Object(J.a)(fr,hr.ExpenseTags,function(e,t,n,a){var r=new Map,c=!0,o=!1,i=void 0;try{for(var s,u=t[Symbol.iterator]();!(c=(s=u.next()).done);c=!0){var l=s.value;if(l.kind===ce.Expense&&l.tags){var p=!0,d=!1,b=void 0;try{for(var f,h=l.tags[Symbol.iterator]();!(p=(f=h.next()).done);p=!0){var g=f.value,O=r.get(g)||0,y=G.convert(Math.abs(l.amount),n[l.currency],a,l.currency);r.set(g,O+y)}}catch(j){d=!0,b=j}finally{try{p||null==h.return||h.return()}finally{if(d)throw b}}}}}catch(j){o=!0,i=j}finally{try{c||null==u.return||u.return()}finally{if(o)throw i}}var v=new Map(Object(m.a)(r.entries()).sort(function(e,t){return t[1]-e[1]}));return{labels:Object(m.a)(v.keys()),series:[Object(m.a)(v.values()).map(function(e){return Math.floor(G.centsToNumber(e,a))})]}}),Object(J.a)(fr,hr.NetWorth,function(e,t,n,a,r){var c,o=e.timespan===gr.Yearly?dr()(0,12).map(function(e){return Fe()((new Date).setMonth(e),"MMM")}):dr()(1,lr()(e.date.start)+1).map(function(e){return"".concat(e).padStart(2,"0")}),i=[],s=!0,u=!1,l=void 0;try{for(var p,d=t[Symbol.iterator]();!(s=(p=d.next()).done);s=!0){var m=p.value;if(m.kind===Or||m.kind===yr){var b=parseInt(Fe()(Pe(m.date),e.timespan===gr.Yearly?"M":"D"))-1;b!==c&&(void 0===c&&(i[c=b+1]=r),i[b]=i[c]),c=b,i[b]-=G.convert(m.amount,n[m.currency],a,m.currency)}}}catch(f){u=!0,l=f}finally{try{s||null==d.return||d.return()}finally{if(u)throw l}}return c&&c>0&&(i[0]=i[c]),e.date.end<Date.now()&&i.length<o.length&&(i[o.length-1]=i[i.length-1]),{labels:o,series:[i.map(function(e){return Math.floor(G.centsToNumber(e,a))})],netWorthStart:i[0],netWorthEnd:r}}),fr),wr=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return Tr[e.kind].apply(Tr,[e].concat(n))};function Rr(e,t){var n=t===jr?rr.a:$n.a,a=t===jr?nr.a:er.a,r=new Date(e);return r.setDate(r.getDate()+1),{start:Pe(n(r)),end:Pe(a(r))}}var Nr=n(104),_r=n.n(Nr),Ir=n(77),Dr=n.n(Ir),Mr=n(105),Fr=n.n(Mr),Lr=(n(200),n(201),n(202),function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e={axisY:{labelInterpolationFnc:function(e){return Fr()(e,2)}},plugins:[Dr.a.plugins.tooltip({class:"mono",currency:this.props.currency,anchorToPoint:!0})]};return s.a.createElement(_r.a,{type:"Bar",className:"ct-octave mt-report-expense-income",data:this.props.data,options:e})}}]),t}(s.a.Component)),Pr=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e={axisY:{offset:70},axisX:{labelInterpolationFnc:function(e){return Fr()(e,2)}},reverseData:!0,horizontalBars:!0,plugins:[Dr.a.plugins.tooltip({class:"mono",currency:this.props.currency,anchorToPoint:!0})]};return s.a.createElement(_r.a,{type:"Bar",className:"mt-report-expense-tags",style:{height:"".concat(3*this.props.data.labels.length,"em")},data:this.props.data,options:e})}}]),t}(s.a.Component),Ur=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e={showArea:!0,low:0,axisY:{labelInterpolationFnc:function(e){return Fr()(e,2)}},plugins:[Dr.a.plugins.tooltip({class:"mono",currency:this.props.currency,anchorToPoint:!0})]};return s.a.createElement(_r.a,{type:"Line",className:"ct-octave mt-report-net-worth",data:this.props.data,options:e})}}]),t}(s.a.Component),Gr=(n(569),function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"ct-octave mt-report"},s.a.createElement(k.a,{active:this.props.isLoading}),!this.props.isLoading&&this.renderReportByKind())}},{key:"renderReportByKind",value:function(){switch(this.props.kind){case hr.ExpenseIncome:return s.a.createElement(Lr,this.props);case hr.NetWorth:return s.a.createElement(Ur,this.props);case hr.ExpenseTags:return s.a.createElement(Pr,this.props);default:return"Not available"}}}]),t}(s.a.Component)),Br=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).handleKindChange=function(e,t){var a=t.value;n.props.changeReportKind(a)},n.handleTimespanChange=function(e,t){var a=t.value;n.props.changeReportTimespan(a)},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"container-header"},s.a.createElement(Se.a.Group,{basic:!0},s.a.createElement(Ie.a,{button:!0,value:this.props.kind,options:this.props.kindOptions,onChange:this.handleKindChange}),s.a.createElement(Se.a,{icon:"chevron left",onClick:this.props.moveReportDateBackwards}),s.a.createElement(Ie.a,{basic:!0,button:!0,icon:!1,text:this.props.timespanLabel,value:this.props.timespan,options:this.props.timespanOptions,onChange:this.handleTimespanChange}),s.a.createElement(Se.a,{icon:"chevron right",onClick:this.props.moveReportDateForwards})))}}]),t}(s.a.Component),Kr=function(e){return e.ui.report},Yr=function(e){var t,n,a=new Date(e.ui.report.date.start);return a.setDate(a.getDate()+1),t=a,n=e.ui.report.timespan,Fe()(t,n===jr?"YYYY":"MMM, YYYY")},Wr=Object(d.b)(function(e){return{kind:e.ui.report.kind,kindOptions:[{key:hr.ExpenseIncome,value:hr.ExpenseIncome,text:"Expense & Income"},{key:hr.ExpenseTags,value:hr.ExpenseTags,text:"Expense by Tags"},{key:hr.NetWorth,value:hr.NetWorth,text:"Net Worth"}],timespan:e.ui.report.timespan,timespanOptions:[{key:jr,value:jr,text:"Yearly"},{key:Er,value:Er,text:"Monthly"}],timespanLabel:Yr(e)}},{changeReportKind:Ba,changeReportTimespan:Ka,moveReportDateBackwards:Wa,moveReportDateForwards:Ha})(Br),Hr=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).handleAccountsChange=function(e,t){var a=t.value;n.props.changeReportAccounts(a)},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"container-footer"},s.a.createElement(Ie.a,{multiple:!0,selection:!0,fluid:!0,placeholder:"Specify accounts",value:this.props.accounts,options:this.props.accountOptions,onChange:this.handleAccountsChange}))}}]),t}(s.a.Component),zr=Object(d.b)(function(e){return{accounts:e.ui.report.accounts,accountOptions:ve(e)}},{changeReportAccounts:Ya})(Hr),Vr=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){this.props.loadAccounts(),this.props.loadReport()}},{key:"render",value:function(){return s.a.createElement("div",{className:"container-full-page flat"},s.a.createElement(Wr,null),s.a.createElement(Gr,this.props),s.a.createElement(zr,null))}}]),t}(s.a.Component),$r=Object(d.b)(function(e){return{isLoading:e.ui.report.isLoading,currency:Y(e),kind:e.ui.report.kind,data:e.ui.report.data}},{loadAccounts:pn,loadReport:za})(Vr),Jr=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(g.a)(this,Object(O.a)(t).call(this,e))).handleBaseChange=function(e,t){var a=t.value;n.props.changeSettingsCurrency({base:a,secondary:n.props.secondary})},n.handleSecondaryChange=function(e,t){var a=t.value;n.props.changeSettingsCurrency({base:n.props.base,secondary:a})},n.options=G.options(),n.updateSecondaryOptions(e.base),n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.updateSecondaryOptions(e.base)}},{key:"updateSecondaryOptions",value:function(e){this.secondaryOptions=this.options.filter(function(t){return t.key!==e})}},{key:"render",value:function(){return s.a.createElement(_e.a,null,s.a.createElement(_e.a.Group,{widths:"equal"},s.a.createElement(_e.a.Field,null,s.a.createElement("label",null,"Base Currency"),s.a.createElement(Ie.a,{search:!0,selection:!0,onChange:this.handleBaseChange,options:this.options,value:this.props.base})),s.a.createElement(_e.a.Field,null,s.a.createElement("label",null,"Additional Currencies (optional)"),s.a.createElement(Ie.a,{placeholder:"Select additional currencies",search:!0,selection:!0,multiple:!0,renderLabel:function(e){return e.key},closeOnChange:!0,onChange:this.handleSecondaryChange,options:this.secondaryOptions,value:this.props.secondary}))))}}]),t}(s.a.Component),qr=Object(d.b)(function(e){return{base:K(e),secondary:W(e)}},{changeSettingsCurrency:I})(Jr),Qr=n(643),Zr=function(e){var t=[e.base].concat(Object(m.a)(e.secondary));return s.a.createElement(ma.a,{celled:!0,unstackable:!0,definition:!0},s.a.createElement(ma.a.Header,null,s.a.createElement(ma.a.Row,null,s.a.createElement(ma.a.HeaderCell,null),t.map(function(e){return s.a.createElement(ma.a.HeaderCell,{key:e,textAlign:"center",content:e})}))),s.a.createElement(ma.a.Body,null,t.map(function(n){return s.a.createElement(ma.a.Row,{key:n},s.a.createElement(ma.a.Cell,{textAlign:"center",content:n}),t.map(function(t){var a=e.exchangeRate[t]/e.exchangeRate[n];return s.a.createElement(ma.a.Cell,{key:"".concat(n,"-").concat(t),disabled:n===t,textAlign:"center",content:Number(a).toLocaleString(void 0,{minimumFractionDigits:4,maximumFractionDigits:a<.001?6:4})})}))})))},Xr=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.base,n=e.secondary,a=e.exchangeRate;return s.a.createElement(ma.a,{basic:!0},s.a.createElement(ma.a.Body,null,n.map(function(e){return s.a.createElement(ma.a.Row,{key:e},s.a.createElement(ma.a.Cell,null,"1 ",e," = ",Number(1/a[e]).toFixed(6)," ",t),s.a.createElement(ma.a.Cell,null,"1 ",t," = ",a[e]," ",e))})))}}]),t}(s.a.Component),ec=(n(571),function(e){return e.secondary.length>0&&s.a.createElement(Ne.a,{basic:!0,className:"exchange-rate-table"},s.a.createElement(C.a,{inverted:!0,active:e.isLoading},s.a.createElement(k.a,null)),s.a.createElement(Qr.a,{minWidth:768},s.a.createElement(Zr,e)),s.a.createElement(Qr.a,{maxWidth:767},s.a.createElement(Xr,e)),s.a.createElement(Se.a,{basic:!0,content:"Update exchange rate",icon:"refresh",onClick:e.updateExchangeRate}))}),tc=Object(d.b)(function(e){return{base:K(e),secondary:W(e),exchangeRate:B(e),isLoading:e.ui.settings.isExchangeLoading}},{updateExchangeRate:D})(ec),nc=n(11),ac=n.n(nc),rc=n(39),cc=n(628),oc=(n(575),n(325)),ic=n(216),sc={};function uc(e){return void 0===sc[e]&&(sc[e]=new ic.a(e,{auto_compaction:!0})),sc[e]}function lc(e){var t="remote_".concat(e);if(void 0===sc[t]){var n=JSON.parse(localStorage.getItem("userInfo"));if(n&&n.couchDB&&n.couchDB[e]){var a=n.couchDB,r=a.username,c=a.password;sc[t]=new ic.a(n.couchDB[e],{skipSetup:!0,auth:r&&c?{username:r,password:c}:void 0})}}return sc[t]}function pc(e){if(void 0!==sc[e]){var t=sc[e];return delete sc[e],delete sc["remote_".concat(e)],t.destroy()}}var dc=function(){return uc("settings")},mc=function(){return uc("accounts")},bc=function(){return uc("transactions")},fc=function(){return uc("tags")},hc=function(){return lc("settings")},gc=function(){return lc("accounts")},Oc=function(){return lc("transactions")},yc=function(){return lc("tags")},vc=function(){return pc("settings")},jc=function(){return pc("accounts")},Ec=function(){return pc("transactions")},xc=function(){return pc("tags")},Cc=n(208),kc=n.n(Cc),Sc={sync:function(){return Ac.apply(this,arguments)},load:function(e){return bc().get(e).then(Je).catch(function(e){if(404!==e.status)throw e})},getAll:function(){return Rc.apply(this,arguments)},loadRecent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze;return bc().allDocs({include_docs:!0,descending:!0,startkey:"T\uffff",endkey:"T",limit:e}).then(function(e){return e.rows.map(function(e){return e.doc})}).then(function(e){return e.map(Je)})},loadFiltered:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return bc().allDocs({include_docs:!0,descending:!0,startkey:e.date?"T".concat(e.date.end,"-\uffff"):"T\uffff",endkey:e.date?"T".concat(e.date.start,"-"):"T"}).then(function(e){return e.rows.map(function(e){return e.doc})}).then(function(t){return function(e,t){Array.isArray(t)&&(t=new Set(t));return t&&t.size?e.filter(function(e){return t.has(e.accountId)||t.has(e.linkedAccountId)}):e}(t,e.accounts)}).then(function(t){return function(e,t){return t&&t.length>0?e.filter(function(e){return kc()(e.tags,t).length>0}):e}(t,e.tags)}).then(function(e){return e.map(function(e){return Je(e)})})},save:Nc,remove:function(e){return!!e&&bc().get(e).then(function(e){return bc().put(Object(b.a)({},e,{_deleted:!0})).then(function(){return e})}).catch(function(e){if(404!==e.status)throw e;return!1})},destroy:function(){return Ec()}};function Ac(){return(Ac=Object(rc.a)(ac.a.mark(function e(){var t,n,a=arguments;return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(a.length>0&&void 0!==a[0])||a[0],Oc()){e.next=3;break}return e.abrupt("return");case 3:return n={batch_size:500},e.next=6,bc().replicate.from(Oc(),n).on("change",function(){var e=Object(rc.a)(ac.a.mark(function e(t){return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.docs.map(Tc));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 6:if(t){e.next=9;break}return e.next=9,bc().replicate.to(Oc(),n);case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Tc(e){return wc.apply(this,arguments)}function wc(){return(wc=Object(rc.a)(ac.a.mark(function e(t){return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id.startsWith("T")||t._id.includes("-")||t._deleted){e.next=5;break}return e.next=3,Nc(Object(b.a)({},t,{id:"T".concat(t.date,"-").concat(t._id.substr(1)),date:void 0,tags:t.tags&&t.tags.length?t.tags:void 0,note:t.note&&t.note.length?t.note:void 0}));case 3:return e.next=5,bc().remove(t);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Rc(){return(Rc=Object(rc.a)(ac.a.mark(function e(){return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bc().allDocs({include_docs:!0,descending:!0,startkey:"T\uffff",endkey:"T"}).then(function(e){return e.rows.map(function(e){return e.doc})}).then(function(e){return e.map(Je)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Nc(e){return bc().get(e.id).then(function(t){return bc().put(Object(b.a)({},t,qe(e)))}).catch(function(t){if(404!==t.status)throw t;return bc().put(Object(b.a)({_id:e.id},qe(e)))})}var _c=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).handleSaveFile=Object(rc.a)(ac.a.mark(function e(){var t;return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sc.getAll();case 2:t=e.sent,Object(oc.save)(JSON.stringify(t),JSON.stringify(new Date(Date.now()))+"_export.json");case 4:case"end":return e.stop()}},e,this)})),n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"mt-dataExport"},s.a.createElement("p",null,"Export transactions to a JSON file."),this.props.error&&s.a.createElement(cc.a,{error:!0,icon:"warning circle",header:"Failed to Export",content:this.props.error}),!this.props.isFileSelected&&s.a.createElement(s.a.Fragment,null,s.a.createElement(Se.a,{content:"Export JSON File",icon:"file text",onClick:this.handleSaveFile})))}}]),t}(s.a.Component),Ic=Object(R.a)("SAVE_EXPORT_FILE").saveExportFile,Dc=Object(d.b)(function(e){return{}},{saveExportFile:Ic})(_c),Mc=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],Fc=(n(589),function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).handleFileChange=function(e){return n.props.openImportFile(e.target.files[0])},n.handleOpenFile=function(){return n.fileInput.click()},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"mt-dataImport"},s.a.createElement("p",null,"Import transactions from a CSV file."),this.props.error&&s.a.createElement(cc.a,{error:!0,icon:"warning circle",header:"Failed to import",content:this.props.error}),!this.props.isFileSelected&&s.a.createElement(s.a.Fragment,null,s.a.createElement(Se.a,{content:"Open File",icon:"file text",onClick:this.handleOpenFile}),s.a.createElement("input",{type:"file",accept:"text/csv",ref:function(t){e.fileInput=t},onChange:this.handleFileChange})),this.props.isFileSelected&&s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"Selected file:"," ",s.a.createElement("strong",null,this.props.filename," (",function(e){if(!Number.isFinite(e))throw new TypeError("Expected a finite number, got ".concat(typeof e,": ").concat(e));var t=e<0;if(t&&(e=-e),e<1)return(t?"-":"")+e+" B";var n=Math.min(Math.floor(Math.log10(e)/3),Mc.length-1);return(t?"-":"")+Number((e/Math.pow(1e3,n)).toPrecision(3))+" "+Mc[n]}(this.props.filesize),")")),!this.props.isProcessing&&s.a.createElement(Se.a.Group,null,s.a.createElement(Se.a,{onClick:this.props.discardImportFile},"Discard File"),s.a.createElement(Se.a.Or,null),s.a.createElement(Se.a,{onClick:this.props.startDataImport,positive:!0},"Start Import")),this.props.isProcessing&&s.a.createElement(Ra.a,{active:!0,indicating:!0,autoSuccess:!0,total:this.props.linesToProcess,value:this.props.linesProcessed})))}}]),t}(s.a.Component)),Lc=Object(R.a)("OPEN_IMPORT_FILE","DISCARD_IMPORT_FILE","START_DATA_IMPORT","IMPORT_FILE_READ_SUCCESS","IMPORT_LINE_PROCESSED","IMPORT_FAILURE"),Pc=Lc.openImportFile,Uc=Lc.discardImportFile,Gc=Lc.startDataImport,Bc=Lc.importFileReadSuccess,Kc=Lc.importLineProcessed,Yc=Lc.importFailure,Wc=function(e){return e.ui.dataImport.file},Hc=Object(d.b)(function(e){var t=Wc(e);return{isFileSelected:e.ui.dataImport.isFileSelected,isProcessing:e.ui.dataImport.isProcessing,linesToProcess:e.ui.dataImport.linesToProcess,linesProcessed:e.ui.dataImport.linesProcessed,filename:t&&t.name,filesize:t&&t.size,error:e.ui.dataImport.error}},{openImportFile:Pc,discardImportFile:Uc,startDataImport:Gc})(Fc),zc=n(637),Vc=n(26),$c=Object(Vc.createAction)("user/ui/sign_out/SIGN_OUT_REQUEST"),Jc=Object(Vc.createAction)("user/ui/sign_out/SIGN_OUT_SUCCESS"),qc=Object(Vc.createAction)("user/ui/sign_out/SIGN_OUT_FAILURE",function(e){return function(t){return e(t)}}),Qc=function(e){return e.user.isDemoUser},Zc=function(e){return e.user.isSignedIn},Xc=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return this.props.isSignOutComplete?s.a.createElement(v.a,{to:"/"}):s.a.createElement(zc.a,{on:"click",trigger:s.a.createElement(Se.a,{content:this.signOutButtonLabel(),icon:this.signOutButtonIcon(),labelPosition:"right"}),header:"Local data will de deleted!",content:s.a.createElement(Se.a,{content:"Confirm",negative:!0,style:{marginTop:"1em"},floated:"right",loading:this.props.isSignOutRunning,disabled:this.props.isSignOutRunning,onClick:this.props.signOut})})}},{key:"signOutButtonLabel",value:function(){return this.props.isDemo?"Reset demo":this.props.isAuthenticated?"Sign out":"Delete data"}},{key:"signOutButtonIcon",value:function(){return this.props.isDemo?"refresh":this.props.isAuthenticated?"sign out":"trash"}}]),t}(s.a.Component),eo=Object(d.b)(function(e){return{isDemo:Qc(e),isAuthenticated:Zc(e),isSignOutRunning:"REQUEST"===e.user.ui.signOut.signOutState,isSignOutComplete:"COMPLETE"===e.user.ui.signOut.signOutState}},{signOut:$c})(Xc),to=[{path:"/",exact:!0,label:"Dashboard",icon:"newspaper",component:Cn},{path:"/transactions/:accountId?",link:"/transactions",exact:!1,label:"Transactions",icon:"exchange",component:ga},{path:"/accounts",exact:!1,label:"Accounts",icon:"credit card",component:Ua},{path:"/reports",exact:!1,label:"Reports",icon:"line chart",component:$r},{path:"/budget",exact:!1,label:"Budget",icon:"shopping basket",component:function(){return s.a.createElement(cc.a,{size:"large",icon:"hourglass half",header:"Work in Progress",content:"This page is not ready yet, check back later \ud83d\ude09"})}},{path:"/settings",exact:!0,label:"Settings",icon:"options",component:function(){return s.a.createElement("div",{className:"container-full-page mt-settings"},s.a.createElement(z,{name:"settings_currency",label:"Currency"},s.a.createElement(qr,null),s.a.createElement(tc,null)),s.a.createElement(z,{name:"settings_import",label:"Data Import"},s.a.createElement(Hc,null)),s.a.createElement(z,{name:"settings_export",label:"Data Export"},s.a.createElement(Dc,null)),s.a.createElement(z,{name:"settings_user",label:"User"},s.a.createElement(eo,null)))}}],no=n(622),ao=Object(Vc.createAction)("user/ui/sign_in/CHANGE_EMAIL",function(e){return function(t){return e(t)}}),ro=Object(Vc.createAction)("user/ui/sign_in/CHANGE_CODE",function(e){return function(t){return e(t)}}),co=Object(Vc.createAction)("user/ui/sign_in/SEND_CODE"),oo=Object(Vc.createAction)("user/ui/sign_in/SEND_CODE_SUCCESS"),io=Object(Vc.createAction)("user/ui/sign_in/SEND_CODE_FAILURE",function(e){return function(t){return e(t)}}),so=Object(Vc.createAction)("user/ui/sign_in/VERIFY_CODE"),uo=Object(Vc.createAction)("user/ui/sign_in/VERIFY_CODE_SUCCESS"),lo=Object(Vc.createAction)("user/ui/sign_in/VERIFY_CODE_FAILURE",function(e){return function(t){return e(t)}}),po=Object(Vc.createAction)("user/ui/sign_in/FINISH_AUTH"),mo=(n(593),function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).renderSendCodeForm=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"Please provide your email address and we will send you a verification code for sign in."),s.a.createElement(_e.a,{onSubmit:n.props.sendCode},s.a.createElement("div",{className:"auth--input-field"},s.a.createElement(De.a,{fluid:!0,required:!0,placeholder:"Email Address",name:"email",type:"email",icon:"mail",iconPosition:"left",value:n.props.email,onChange:function(e,t){var a=t.value;return n.props.changeEmail(a)},disabled:"REQUEST"===n.props.sendCodeStatus,action:{primary:!0,content:"Send Code",loading:"REQUEST"===n.props.sendCodeStatus}}))),s.a.createElement(Kt.a,{as:"h3"},"Why do I need to sign in?"),s.a.createElement("p",{style:{marginTop:"1em"}},"After you sign in for the first time we will create a new database for you hosted in the cloud. This database will be used to synchronize your data among different devices as well as for back up."))},n.renderVerifyCodeForm=function(){return s.a.createElement(_e.a,{onSubmit:n.props.verifyCode},s.a.createElement("p",null,"An email with the code has been sent to ",n.props.email),s.a.createElement("div",{className:"auth--input-field"},s.a.createElement(De.a,{fluid:!0,required:!0,placeholder:"Your Code",type:"number",icon:"lock",iconPosition:"left",value:n.props.code,onChange:function(e,t){var a=t.value;return n.props.changeCode(a)},disabled:"REQUEST"===n.props.verifyCodeStatus,action:s.a.createElement(Se.a,{primary:!0,content:"Sign In",loading:"REQUEST"===n.props.verifyCodeStatus})}),s.a.createElement(Se.a,{basic:!0,as:"a"},"Didn't get the code?")))},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.location&&this.props.location.hash&&this.props.finishAuth()}},{key:"render",value:function(){return this.props.isSignedIn?s.a.createElement(v.a,{to:"/"}):this.props.location&&this.props.location.hash?s.a.createElement(k.a,{active:!0,content:"Synchronizing data, this might take a moment..."}):s.a.createElement("div",{className:"container-raised-desktop"},s.a.createElement(Kt.a,{as:"h2",icon:"id card outline",content:"Sign In"}),s.a.createElement(no.a,null),this.props.error&&s.a.createElement(cc.a,{error:!0},s.a.createElement(cc.a.Header,null,"Error"),s.a.createElement(cc.a.Content,null,this.props.error)),"SUCCESS"!==this.props.sendCodeStatus?this.renderSendCodeForm():this.renderVerifyCodeForm(),s.a.createElement(no.a,null),s.a.createElement("p",null,s.a.createElement(ke.a,{to:"/"},"Back")))}}]),t}(s.a.Component)),bo=Object(d.b)(function(e){var t=e.user;return Object(b.a)({},t.ui.signIn,{isSignedIn:t.isSignedIn})},{changeEmail:ao,changeCode:ro,sendCode:co,verifyCode:so,finishAuth:po})(mo),fo=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.loadAccounts()}},{key:"render",value:function(){return s.a.createElement("div",{className:"container-raised-desktop"},s.a.createElement(Kt.a,{as:"h2",icon:"settings",content:"Money Tracker Setup"}),s.a.createElement(no.a,null),!this.props.isAuthenticated&&s.a.createElement("p",null,s.a.createElement(ke.a,{to:"/auth"},"Sign in")," if you want to sync your data with the cloud. You may also use the tracker without signing in. Your data will be stored only on current device in this case. You can sign in and sync your data any time later."),s.a.createElement(Kt.a,{as:"h2"},"Currencies"),s.a.createElement("p",null,"Select your base currency \u2014 the currency which will be used by default.",s.a.createElement("br",null),"You can also select any number of additional currencies, if you use them."),s.a.createElement(qr,null),s.a.createElement(tc,null),s.a.createElement(Kt.a,{as:"h2"},"Accounts"),s.a.createElement("p",null,"Create accounts that you would like to keep track of.",s.a.createElement("br",null),"It could be cash in your wallet, bank accounts, credit cards or even a loan to your friend."),s.a.createElement(La,null),this.props.accounts.length>0&&s.a.createElement("div",{style:{margin:"1em"}},s.a.createElement(Ia,null),s.a.createElement("div",{className:"form-submit"},s.a.createElement(Se.a,{primary:!0,content:"Finish",onClick:this.props.completeSetup}))))}}]),t}(s.a.Component),ho=Object(d.b)(function(e){return{isAuthenticated:Zc(e),accounts:pe(e)}},{loadAccounts:pn,completeSetup:P})(fo),go=function(e){var t=e.isOpen,n=e.toggleSidebar;return s.a.createElement("nav",{className:t?"open":"closed",onClick:n},s.a.createElement(Xe.a,{fluid:!0,color:"blue",vertical:!0,icon:"labeled"},to.map(function(e){return s.a.createElement(j.a,{key:e.path,exact:e.exact,path:e.path,children:function(t){var n=t.match;return s.a.createElement(Xe.a.Item,{as:ke.a,to:e.link||e.path,active:!!n},s.a.createElement(w.a,{name:e.icon}),e.label)}})})))},Oo=n(328),yo=n.n(Oo),vo=(n(595),function(){return s.a.createElement("div",{className:"logo"},s.a.createElement("img",{src:yo.a,alt:"Money Tracker"}))}),jo=n(608),Eo=Object(jo.a)("TOGGLE_SIDEBAR"),xo=Object(R.a)("DISMISS_SYNC_WARNING","SET_PENDING_CHANGES_FLAG","SYNC","SYNC_REQUEST","SYNC_SUCCESS","SYNC_FAILURE"),Co=xo.dismissSyncWarning,ko=xo.setPendingChangesFlag,So=xo.sync,Ao=xo.syncRequest,To=xo.syncSuccess,wo=xo.syncFailure,Ro=(n(597),Object(d.b)(function(e,t){return Object(b.a)({},t,{isMobile:e.ui.isMobile,isAuthenticated:Zc(e),isSyncRunning:e.ui.sync.isRunning,hasPendingChanges:e.ui.sync.hasPendingChanges})},{toggleSidebar:Eo,sync:So})(function(e){var t=e.label,n=e.isMobile,a=e.isAuthenticated,r=e.isSyncRunning,c=e.hasPendingChanges,o=e.toggleSidebar,i=e.sync;return s.a.createElement("header",null,s.a.createElement(Kt.a,null,n&&s.a.createElement(w.a,{name:"bars",onClick:o}),!n&&s.a.createElement(vo,null),s.a.createElement(Kt.a.Content,{as:"h2"},t),a&&(r?s.a.createElement(w.a,{name:"refresh",loading:!0}):s.a.createElement(w.a,{name:"refresh",color:c?"olive":void 0,onClick:i,style:{cursor:"pointer"}}))))})),No=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return this.props.isVisible?s.a.createElement(cc.a,{size:"large",icon:"user circle outline",header:"Welcome to demo account!",content:s.a.createElement("div",{style:{marginTop:"0.5em"}},s.a.createElement("p",null,"You are logged in as a demo user with sample data generated to show you how things might look like."),s.a.createElement("p",null,"All the changes you make will only be stored locally on your device."),s.a.createElement("p",null,s.a.createElement(Se.a,{as:"a",href:"https://app.moneytracker.cc",icon:"sign in",content:"Go to Live app",labelPosition:"right"})))}):null}}]),t}(s.a.Component),_o=Object(d.b)(function(e){return{isVisible:Qc(e)}})(No),Io=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return this.props.isVisible?s.a.createElement(cc.a,{warning:!0,size:"large",onDismiss:this.props.dismissSyncWarning},s.a.createElement(cc.a.Header,null,"No Synchronization"),s.a.createElement(cc.a.Content,null,"Your data is stored only on this device and might be lost when browser storage is cleared."),s.a.createElement(cc.a.Content,null,s.a.createElement(ke.a,{to:"/auth"},"Sign in")," if you want to sync your data with the cloud and be able to access it from multiple devices.")):null}}]),t}(s.a.Component),Do=Object(d.b)(function(e){return{isVisible:!Zc(e)&&e.ui.sync.isWarningVisible}},{dismissSyncWarning:Co})(Io),Mo=Object(jo.a)("WINDOW_RESIZE"),Fo=Object(jo.a)("BOOTSTRAP"),Lo=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).renderNavigationRoutes=function(){if(window.location.pathname.endsWith("index.html"))return s.a.createElement(v.a,{to:"/"});var e=n.props,t=e.isSidebarOpen,a=e.isMobile,r=e.toggleSidebar;return s.a.createElement(s.a.Fragment,null,s.a.createElement(C.a,{page:!0,active:a&&t,onClick:r,style:{zIndex:100}}),s.a.createElement(go,{isOpen:!a||t,toggleSidebar:r}),function e(t){var n=[];t.forEach(function(t){t.routes?(n.push(Object(b.a)({},t,{exact:!0})),n.push.apply(n,Object(m.a)(e(t.routes)))):n.push(t)});return n}(to).map(function(e){return s.a.createElement(j.a,{key:e.path,path:e.path,exact:e.exact,render:function(t){return s.a.createElement(s.a.Fragment,null,s.a.createElement(Ro,{label:e.label}),s.a.createElement("div",{className:"container"},s.a.createElement(_o,null),s.a.createElement(Do,null),s.a.createElement(e.component,t)))}})}))},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",A()(this.props.windowResize,500)),this.props.bootstrap()}},{key:"render",value:function(){return this.props.isLoaded?s.a.createElement(E.a,{history:this.props.history},s.a.createElement(x.a,null,s.a.createElement(j.a,{path:"/auth",exact:!0,component:bo}),this.props.isSetupComplete?s.a.createElement(j.a,{render:this.renderNavigationRoutes}):s.a.createElement(j.a,{component:ho}))):s.a.createElement(k.a,{active:!0,content:this.props.isSyncRunning&&"Synchronizing data, this might take a moment..."})}}]),t}(s.a.Component);var Po=Object(d.b)(function(e,t){return{history:t.history,isLoaded:e.settings.isLoaded,isSyncRunning:e.ui.sync.isRunning,isSetupComplete:e.settings.isSetupComplete,isMobile:e.ui.isMobile,isSidebarOpen:e.ui.isSidebarOpen}},{bootstrap:Fo,windowResize:Mo,toggleSidebar:Eo})(Lo),Uo=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(g.a)(this,Object(O.a)(t).call(this,e))).state={error:null},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e}),console.log("sentry error",e),p.withScope(function(n){Object.keys(t).forEach(function(e){n.setExtra(e,t[e])}),p.captureException(e)})}},{key:"render",value:function(){return this.state.error?s.a.createElement("button",{onClick:function(){return p.showReportDialog()}},"Report feedback"):this.props.children}}]),t}(s.a.Component),Go=function(e){var t=e.store,n=e.history;return s.a.createElement(Uo,null,s.a.createElement(d.a,{store:t},s.a.createElement(Po,{history:n})))},Bo=(n(599),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function Ko(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Yo,Wo,Ho,zo,Vo,$o,Jo,qo,Qo,Zo,Xo,ei,ti,ni=n(332),ai=n(34),ri=n(329),ci=n(631),oi=n(640),ii=ie.fromArray([]),si=Object(ci.a)((Yo={},Object(J.a)(Yo,dn,function(e,t){var n=t.payload;return ie.fromArray(n)}),Object(J.a)(Yo,Object(oi.a)(mn,hn),function(e,t){var n=t.payload;return ie.set(e,n)}),Object(J.a)(Yo,Object(oi.a)(En,bn),function(e,t){var n=t.payload;return ie.remove(e,n)}),Object(J.a)(Yo,Object(Vc.getType)(Jc),function(){return ii}),Yo),ii),ui=ce.Expense,li=ce.Transfer,pi=ce.Income,di=(Wo={},Object(J.a)(Wo,ui,[]),Object(J.a)(Wo,li,[]),Object(J.a)(Wo,pi,[]),Wo),mi=Object(ci.a)((Ho={},Object(J.a)(Ho,yt,function(e,t){var n=t.payload;return Object(b.a)({},e,Object(J.a)({},ui,n))}),Object(J.a)(Ho,vt,function(e,t){var n=t.payload;return Object(b.a)({},e,Object(J.a)({},pi,n))}),Object(J.a)(Ho,It,function(e,t){var n=t.payload,a=n.kind,r=n.tag;return e[a].includes(r)?e:Object(b.a)({},e,Object(J.a)({},a,e[a].concat(r)))}),Object(J.a)(Ho,Object(Vc.getType)(Jc),function(){return di}),Ho),di),bi=ie.fromArray([]),fi=Object(ci.a)((zo={},Object(J.a)(zo,lt,function(e,t){var n=t.payload;return ie.fromArray(n)}),Object(J.a)(zo,Object(Vc.getType)(Jc),function(){return bi}),zo),bi),hi=ie.fromArray([]),gi=Object(ci.a)((Vo={},Object(J.a)(Vo,dt,function(e,t){var n=t.payload;return ie.fromArray(n)}),Object(J.a)(Vo,Object(Vc.getType)(Jc),function(){return hi}),Vo),hi),Oi=Object(ai.combineReducers)({filter:fi,recent:gi}),yi=Object(ai.combineReducers)({accounts:si,tags:mi,transactions:Oi}),vi=n(54),ji=n.n(vi),Ei={name:"",group:Q,balance:{},currencies:[],on_dashboard:!0,completed:!1,isModalOpen:!1,isDeleteRequest:!1,isDeleteRunning:!1,itemsToProcess:1/0,itemsProcessed:0},xi=Object(ci.a)(($o={},Object(J.a)($o,xa,function(e,t){var n=t.payload;return Object(b.a)({},e,{group:n})}),Object(J.a)($o,Ea,function(e,t){var n=t.payload;return Object(b.a)({},e,{name:n})}),Object(J.a)($o,ka,function(e,t){var n=t.payload,a=e.currencies.includes(n);return a&&1===e.currencies.length?e:Object(b.a)({},e,{currencies:a?e.currencies.filter(function(e){return e!==n}):e.currencies.concat(n),balance:a||void 0!==e.balance[n]?e.balance:Object(b.a)({},e.balance,Object(J.a)({},n,""))})}),Object(J.a)($o,Ca,function(e,t){var n=t.payload;return Object(b.a)({},e,{currencies:e.currencies.includes(n.code)?e.currencies:e.currencies.concat(n.code),balance:Object(b.a)({},e.balance,Object(J.a)({},n.code,n.balance))})}),Object(J.a)($o,Sa,function(e){return Object(b.a)({},e,{on_dashboard:!e.on_dashboard})}),Object(J.a)($o,I,function(e,t){var n=t.payload,a=new Set([n.base].concat(Object(m.a)(n.secondary)));return Object(b.a)({},e,{currencies:e.currencies.filter(function(e){return a.has(e)}),balance:ji()(e.balance,Object(m.a)(a))})}),Object(J.a)($o,ja,function(e,t){var n=t.payload;return Object(b.a)({},e,n,{isModalOpen:!0})}),Object(J.a)($o,va,function(){return Ei}),Object(J.a)($o,Object(oi.a)(fn,En),function(){return Object(b.a)({},Ei,{completed:!0})}),Object(J.a)($o,ya,function(e,t){var n=t.payload;return Object(b.a)({},e,te(n))}),Object(J.a)($o,On,function(e){return Object(b.a)({},e,{isDeleteRequest:!e.isDeleteRequest})}),Object(J.a)($o,yn,function(e,t){return Object(b.a)({},e,{isDeleteRunning:!0,itemsToProcess:t.payload})}),Object(J.a)($o,Object(oi.a)(En,jn),function(e){return Object(b.a)({},e,{isDeleteRunning:!1})}),Object(J.a)($o,vn,function(e,t){return Object(b.a)({},e,{itemsProcessed:t.payload})}),$o),Ei),Ci={kind:He,isModalOpen:!1},ki=Object(ci.a)((Jo={},Object(J.a)(Jo,Et,function(e,t){return t.payload}),Object(J.a)(Jo,Ct,function(e,t){var n=t.payload;return Object(b.a)({},e,n,{isModalOpen:!0})}),Object(J.a)(Jo,kt,function(e,t){var n=t.payload;return Object(b.a)({},e,{kind:n})}),Object(J.a)(Jo,St,function(e,t){var n=t.payload;return Object(b.a)({},e,{accountId:n.accountId,currency:n.currency.includes(e.currency)?e.currency:n.currency[0]})}),Object(J.a)(Jo,wt,function(e,t){var n=t.payload;return Object(b.a)({},e,{linkedAccountId:n.accountId,linkedCurrency:n.currency.includes(e.linkedCurrency)?e.linkedCurrency:n.currency[0]})}),Object(J.a)(Jo,At,function(e,t){var n=t.payload;return Object(b.a)({},e,{amount:n,linkedAmount:e.currency===e.linkedCurrency?n:e.linkedAmount})}),Object(J.a)(Jo,Rt,function(e,t){var n=t.payload;return Object(b.a)({},e,{amount:e.currency===e.linkedCurrency?n:e.amount,linkedAmount:n})}),Object(J.a)(Jo,Tt,function(e,t){var n=t.payload;return Object(b.a)({},e,{currency:n,linkedAmount:e.linkedCurrency===n?e.amount:e.linkedAmount})}),Object(J.a)(Jo,Nt,function(e,t){var n=t.payload;return Object(b.a)({},e,{linkedCurrency:n,linkedAmount:e.currency===n?e.amount:e.linkedAmount})}),Object(J.a)(Jo,Dt,function(e,t){var n=t.payload;return Object(b.a)({},e,{tags:Object(b.a)({},e.tags,Object(J.a)({},e.kind,n))})}),Object(J.a)(Jo,_t,function(e,t){var n=t.payload;return Object(b.a)({},e,{date:n})}),Object(J.a)(Jo,Mt,function(e,t){var n=t.payload;return Object(b.a)({},e,{note:n})}),Jo),Ci),Si=Object(ai.combineReducers)({account:xi,transaction:ki}),Ai=Object(ci.a)((qo={},Object(J.a)(qo,Ba,function(e,t){var n=t.payload;return Object(b.a)({},e,{kind:n})}),Object(J.a)(qo,Ka,function(e,t){var n=t.payload;return Object(b.a)({},e,{timespan:n,date:kr(n)})}),Object(J.a)(qo,Ya,function(e,t){var n=t.payload;return Object(b.a)({},e,{accounts:n})}),Object(J.a)(qo,Wa,function(e){return Object(b.a)({},e,{date:Sr(e.date,e.timespan),data:Object(b.a)({},e.data,{netWorthEnd:e.data.netWorthStart}),netWorthStack:[e.data.netWorthEnd].concat(Object(m.a)(e.netWorthStack))})}),Object(J.a)(qo,Ha,function(e){return Object(b.a)({},e,{date:Ar(e.date,e.timespan),data:Object(b.a)({},e.data,{netWorthEnd:e.netWorthStack[0]}),netWorthStack:e.netWorthStack.slice(1)})}),Object(J.a)(qo,za,function(e){return Object(b.a)({},e,{isLoading:!0})}),Object(J.a)(qo,Va,function(e,t){var n=t.payload;return Object(b.a)({},e,{isLoading:!1,data:n})}),Object(J.a)(qo,$a,function(e){return Object(b.a)({},e,{isLoading:!1})}),qo),{isLoading:!1,data:{},kind:xr,timespan:Cr,date:kr(),accounts:[],netWorthStack:[]}),Ti={dateStart:Pe(ea()),dateEnd:Pe(ta()),isCalendarOpen:!1,isFilterModalOpen:!1,applied:{},isLoading:!1,totalRows:0,page:0,perPage:10},wi=Object(ci.a)((Qo={},Object(J.a)(Qo,ut,function(e){return Object(b.a)({},e,{isLoading:!0})}),Object(J.a)(Qo,lt,function(e,t){var n=t.payload;return Object(b.a)({},e,{page:0,totalRows:n.length,isLoading:!1})}),Object(J.a)(Qo,ca,function(e,t){var n=t.payload;return Object(b.a)({},e,{dateStart:Pe(n.dateStart),dateEnd:Pe(n.dateEnd),isLoading:!0})}),Object(J.a)(Qo,ia,function(e,t){var n=t.payload;return Object(b.a)({},e,{page:n})}),Object(J.a)(Qo,oa,function(e){return Object(b.a)({},e,{isCalendarOpen:!e.isCalendarOpen})}),Object(J.a)(Qo,sa,function(e){return Object(b.a)({},e,{isFilterModalOpen:!e.isFilterModalOpen})}),Object(J.a)(Qo,ua,function(e,t){var n=t.payload;return Object(b.a)({},e,{applied:n})}),Qo),Ti),Ri=Object(ai.combineReducers)({filter:wi}),Ni={isFileSelected:!1,file:void 0,error:"",isProcessing:!1,linesToProcess:1/0,linesProcessed:0},_i=Object(ci.a)((Zo={},Object(J.a)(Zo,Pc,function(e,t){return Object(b.a)({},e,{isFileSelected:!0,file:t.payload})}),Object(J.a)(Zo,Uc,function(e){return Object(b.a)({},e,{isFileSelected:!1,file:void 0})}),Object(J.a)(Zo,Gc,function(e){return Object(b.a)({},e,{isProcessing:!0})}),Object(J.a)(Zo,Bc,function(e,t){return Object(b.a)({},e,{linesToProcess:t.payload})}),Object(J.a)(Zo,Kc,function(e,t){return Object(b.a)({},e,{linesProcessed:t.payload})}),Object(J.a)(Zo,Yc,function(e,t){return Object(b.a)({},e,{isFileSelected:!1,isProcessing:!1,file:void 0,error:t.payload.message})}),Zo),Ni),Ii=n(607),Di=function(){return window.matchMedia("(max-width: 768px)").matches},Mi=Object(Ii.a)(Mo,Di,Di()),Fi=Object(Ii.a)(Eo,function(e){return!e},!1),Li=Object(ci.a)((Xo={},Object(J.a)(Xo,Object(oi.a)(I,D),function(e){return Object(b.a)({},e,{isExchangeLoading:!0})}),Object(J.a)(Xo,Object(oi.a)(M,F),function(e){return Object(b.a)({},e,{isExchangeLoading:!1})}),Xo),{isExchangeLoading:!1}),Pi=Object(ci.a)((ei={},Object(J.a)(ei,Ao,function(e){return Object(b.a)({},e,{isRunning:!0})}),Object(J.a)(ei,To,function(e){return Object(b.a)({},e,{isRunning:!1,hasPendingChanges:!1})}),Object(J.a)(ei,wo,function(e){return{isRunning:!1}}),Object(J.a)(ei,Co,function(e){return Object(b.a)({},e,{isWarningVisible:!1})}),Object(J.a)(ei,ko,function(e){return Object(b.a)({},e,{hasPendingChanges:!0})}),ei),{isRunning:!1,isWarningVisible:!0,hasPendingChanges:!1}),Ui=Object(ai.combineReducers)({form:Si,report:Ai,transaction:Ri,dataImport:_i,settings:Li,sync:Pi,isMobile:Mi,isSidebarOpen:Fi}),Gi={isLoaded:!1,isSetupComplete:!1,currency:{base:G.defaultBase,secondary:[]},exchangeRate:Object(J.a)({},G.defaultBase,1),collapsedSections:[]},Bi=Object(ci.a)((ti={},Object(J.a)(ti,_,function(e,t){var n=t.payload;return Object(b.a)({},e,{isLoaded:!0},ji()(n,Object.keys(e)))}),Object(J.a)(ti,I,function(e,t){var n=t.payload,a=n.base,r=n.secondary;return r.includes(a)&&(r=r.concat(e.currency.base).filter(function(e){return e!==a})),Object(b.a)({},e,{currency:{base:a,secondary:r}})}),Object(J.a)(ti,M,function(e,t){var n=t.payload;return Object(b.a)({},e,{exchangeRate:n})}),Object(J.a)(ti,L,function(e,t){var n=t.payload;return Object(b.a)({},e,{collapsedSections:e.collapsedSections.includes(n)?e.collapsedSections.filter(function(e){return e!==n}):e.collapsedSections.concat(n)})}),Object(J.a)(ti,P,function(e){return Object(b.a)({},e,{isSetupComplete:!0})}),Object(J.a)(ti,Object(Vc.getType)(Jc),function(){return Gi}),ti),Gi),Ki=Object(Vc.createAction)("user/SET_DEMO_USER"),Yi=Object(Vc.createAction)("user/SIGN_IN_SUCCESS"),Wi={email:"",code:""},Hi=n(5),zi=new(n(330).a)({domain:"money-tracker.auth0.com",clientID:"NnttWrjWNjJjbhORjkIOrUVs07wF0UfN",redirectUri:"https://app.moneytracker.cc/auth",responseType:"token"}),Vi={sendCode:function(e){return new Promise(function(t,n){zi.passwordlessStart({connection:"email",send:"code",email:e},function(e,a){return e?n(e):t(a)})})},verifyCode:function(e,t){return new Promise(function(n,a){zi.passwordlessLogin({connection:"email",email:e,verificationCode:t},function(e,t){return e?a(e):n(t)})})},parseHash:function(){return new Promise(function(e,t){zi.parseHash(function(n,a){if(n)return t(n);e(a.accessToken)})})},getUserInfo:function(e){return new Promise(function(t,n){zi.client.userInfo(e,function(a,r){if(a)return n(a);t({accessToken:e,couchDB:r.couchDB})})})}};var $i=function(e){return e.user.ui.signIn.email},Ji=function(e){return e.user.ui.signIn.code},qi=ce.Transfer;function Qi(e,t){return!e&&t?Zi(t):e&&!t?Xi(e):e&&t?Object(m.a)(Xi(e)).concat(Object(m.a)(Zi(t))):[]}function Zi(e){var t=[];return e.kind===qi&&e.accountId===e.linkedAccountId&&e.currency===e.linkedCurrency?t:(t.push({accountId:e.accountId,currency:e.currency,amount:e.amount*(e.kind===qi?-1:1)}),e.kind===qi&&e.linkedAccountId&&e.linkedCurrency&&e.linkedAmount&&t.push({accountId:e.linkedAccountId,currency:e.linkedCurrency,amount:e.linkedAmount}),t)}function Xi(e){var t=[];return t.push({accountId:e.accountId,currency:e.currency,amount:e.amount*(e.kind===qi?1:-1)}),e.kind===qi&&e.linkedAccountId&&e.linkedCurrency&&e.linkedAmount&&t.push({accountId:e.linkedAccountId,currency:e.linkedCurrency,amount:-1*e.linkedAmount}),t}var es={sync:function(){return ts.apply(this,arguments)},load:function(e){return fc().allDocs({include_docs:!0,start_key:"t".concat(e),end_key:"t".concat(e,"\uffff")}).then(function(e){return e.rows.map(function(e){return{tag:e.doc._id.split("/")[1],usage:e.doc.usage}})}).then(function(e){return e.sort(function(e,t){return t.usage-e.usage})}).then(function(e){return e.map(function(e){return e.tag})})},updateUsage:function(e,t,n){var a="t".concat(e,"/").concat(t);return fc().get(a).then(function(e){return fc().put(Object(b.a)({},e,{usage:parseInt(e.usage,10)+n}))}).catch(function(e){if(404!==e.status)throw e;return fc().put({_id:a,usage:1})})},destroy:function(){return xc()}};function ts(){return(ts=Object(rc.a)(ac.a.mark(function e(){var t,n,a=arguments;return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]&&a[0],n=!1,yc()){e.next=4;break}return e.abrupt("return",n);case 4:return e.next=6,fc().replicate.from(yc());case 6:if(e.sent.docs_written>0&&(n=!0),!t){e.next=10;break}return e.abrupt("return",n);case 10:return e.next=12,fc().replicate.to(yc());case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ns(e,t){var n=new Set,a=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var s=o.value;t.has(s)||n.add(s)}}catch(u){r=!0,c=u}finally{try{a||null==i.return||i.return()}finally{if(r)throw c}}return n}var as=ac.a.mark(is),rs=ac.a.mark(ss),cs=ce.Expense,os=ce.Income;function is(){var e,t;return ac.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Hi.b)(es.load,cs);case 2:return e=n.sent,n.next=5,Object(Hi.c)(yt(e));case 5:return n.next=7,Object(Hi.b)(es.load,os);case 7:return t=n.sent,n.next=10,Object(Hi.c)(vt(t));case 10:case"end":return n.stop()}},as,this)}function ss(e,t){var n,a,r,c,o,i,s,u,l,p,d,m,b,f;return ac.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:n=new Set(e&&e.tags||[]),a=new Set(t&&t.tags||[]),r=!0,c=!1,o=void 0,h.prev=5,i=ns(a,n)[Symbol.iterator]();case 7:if(r=(s=i.next()).done){h.next=14;break}return u=s.value,h.next=11,Object(Hi.b)(es.updateUsage,t.kind,u,1);case 11:r=!0,h.next=7;break;case 14:h.next=20;break;case 16:h.prev=16,h.t0=h.catch(5),c=!0,o=h.t0;case 20:h.prev=20,h.prev=21,r||null==i.return||i.return();case 23:if(h.prev=23,!c){h.next=26;break}throw o;case 26:return h.finish(23);case 27:return h.finish(20);case 28:l=!0,p=!1,d=void 0,h.prev=31,m=ns(n,a)[Symbol.iterator]();case 33:if(l=(b=m.next()).done){h.next=40;break}return f=b.value,h.next=37,Object(Hi.b)(es.updateUsage,e.kind,f,-1);case 37:l=!0,h.next=33;break;case 40:h.next=46;break;case 42:h.prev=42,h.t1=h.catch(31),p=!0,d=h.t1;case 46:h.prev=46,h.prev=47,l||null==m.return||m.return();case 49:if(h.prev=49,!p){h.next=52;break}throw d;case 52:return h.finish(49);case 53:return h.finish(46);case 54:case"end":return h.stop()}},rs,this,[[5,16,20,28],[21,,23,27],[31,42,46,54],[47,,49,53]])}var us=[Object(Hi.e)(Ot,is)],ls=ac.a.mark(hs),ps=ac.a.mark(gs),ds=ac.a.mark(Os),ms=ac.a.mark(ys),bs=ac.a.mark(vs),fs=ac.a.mark(js);function hs(){var e;return ac.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Hi.d)(sn);case 2:return e=t.sent,t.next=5,Object(Hi.c)(Et(e));case 5:case"end":return t.stop()}},ls,this)}function gs(){var e,t;return ac.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Hi.d)(zt);case 2:return e=n.sent,n.next=5,Object(Hi.b)(Sc.loadFiltered,e);case 5:return t=n.sent,n.next=8,Object(Hi.c)(lt(t));case 8:case"end":return n.stop()}},ps,this)}function Os(){var e;return ac.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Hi.b)(Sc.loadRecent);case 2:return e=t.sent,t.next=5,Object(Hi.c)(dt(e));case 5:case"end":return t.stop()}},ds,this)}function ys(e){var t;return ac.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Hi.b)(Sc.remove,e.payload);case 2:return t=n.sent,n.next=5,Object(Hi.b)(js,t);case 5:return n.next=7,Object(Hi.b)(ss,t);case 7:return n.next=9,Object(Hi.b)(Os);case 9:return n.next=11,Object(Hi.b)(gs);case 11:return n.next=13,Object(Hi.b)(hs);case 13:return n.next=15,Object(Hi.c)(ht());case 15:case"end":return n.stop()}},ms,this)}function vs(e){var t,n;return ac.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,Object(Hi.b)(Sc.remove,t.id);case 3:return n=a.sent,t.id="T".concat(t.date,"-").concat(Date.now()),a.next=7,Object(Hi.b)(Sc.save,t);case 7:return a.next=9,Object(Hi.b)(js,n,t);case 9:return a.next=11,Object(Hi.b)(ss,n,t);case 11:return a.next=13,Object(Hi.b)(Os);case 13:return a.next=15,Object(Hi.b)(gs);case 15:return a.next=17,Object(Hi.b)(hs);case 17:return a.next=19,Object(Hi.c)(bt());case 19:case"end":return a.stop()}},bs,this)}function js(e,t){var n,a,r,c,o,i;return ac.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:n=!0,a=!1,r=void 0,s.prev=3,c=Qi(e,t)[Symbol.iterator]();case 5:if(n=(o=c.next()).done){s.next=12;break}return i=o.value,s.next=9,Object(Hi.b)(Us,i);case 9:n=!0,s.next=5;break;case 12:s.next=18;break;case 14:s.prev=14,s.t0=s.catch(3),a=!0,r=s.t0;case 18:s.prev=18,s.prev=19,n||null==c.return||c.return();case 21:if(s.prev=21,!a){s.next=24;break}throw r;case 24:return s.finish(21);case 25:return s.finish(18);case 26:case"end":return s.stop()}},fs,this,[[3,14,18,26],[19,,21,25]])}var Es=[Object(Hi.e)(xt,hs),Object(Hi.e)(ut,gs),Object(Hi.e)(ca,gs),Object(Hi.e)(ua,gs),Object(Hi.e)(pt,Os),Object(Hi.e)(ft,ys),Object(Hi.e)(mt,vs)],xs={sync:function(){return Cs.apply(this,arguments)},loadAll:ks,save:function(e){return mc().get(e.id).then(function(t){return mc().put(Object(b.a)({},t,ae(e)))}).catch(function(t){if(404!==t.status)throw t;return mc().put(Object(b.a)({_id:e.id},ae(e)))})},archive:function(e){return mc().get(e).then(function(e){return mc().put(Object(b.a)({},e,{archived:!0}))})},mutateBalance:function(e){var t=e.accountId,n=e.currency,a=e.amount;return mc().get(t).then(function(e){return mc().put(function(e,t,n){return Object(b.a)({},e,{currencies:Object(m.a)(new Set(Object(m.a)(e.currencies).concat([t]))),balance:Object(b.a)({},e.balance,Object(J.a)({},t,parseInt("".concat(e.balance[t]||0),10)+n))})}(e,n,a))}).then(function(e){var n=e.rev;return mc().get(t,n)}).then(function(e){return ne(e)})},remove:function(e){return mc().get(e).then(function(e){return mc().put(Object(b.a)({},e,{_deleted:!0}))}).catch(function(e){if(404!==e.status)throw e;return!0})},destroy:function(){return jc()}};function Cs(){return(Cs=Object(rc.a)(ac.a.mark(function e(){var t,n=arguments;return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],gc()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,mc().replicate.from(gc());case 5:if(!(e.sent.docs_written>0)){e.next=11;break}return e.next=9,ks();case 9:Ss(e.sent);case 11:if(!t){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,mc().replicate.to(gc());case 15:if(!(e.sent.docs_written>0)){e.next=21;break}return e.next=19,ks();case 19:Ss(e.sent);case 21:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ks(){return mc().allDocs({include_docs:!0,conflicts:!0,startkey:"A",endkey:"A\uffff"}).then(function(e){return Promise.all(e.rows.map(As))}).then(function(e){return e.map(ne)})}function Ss(e){e.forEach(function(e){localStorage.setItem(e.id,JSON.stringify(e.balance))})}function As(e){return Ts.apply(this,arguments)}function Ts(){return(Ts=Object(rc.a)(ac.a.mark(function e(t){var n,a;return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.doc._conflicts){e.next=2;break}return e.abrupt("return",t.doc);case 2:return n=JSON.parse(localStorage.getItem(t.doc._id)),e.next=5,Promise.all(t.doc._conflicts.map(function(){var e=Object(rc.a)(ac.a.mark(function e(n){return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mc().get(t.doc._id,{rev:n}).then(function(e){return e.balance}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 5:return(a=e.sent).push(t.doc.balance),t.doc.balance=ws(n,a),e.abrupt("return",Promise.all(t.doc._conflicts.map(function(){var e=Object(rc.a)(ac.a.mark(function e(n){return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mc().remove(t.doc._id,n));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())).then(function(){return mc().put(t.doc)}).then(function(){return t.doc}));case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ws(e,t){return Object.keys(e).reduce(function(n,a){return n[a]=e[a]+t.reduce(function(t,n){return t+(n[a]-e[a])},0),n},{})}var Rs=ac.a.mark(Ls),Ns=ac.a.mark(Ps),_s=ac.a.mark(Us),Is=ac.a.mark(Gs),Ds=ac.a.mark(Bs),Ms=ac.a.mark(Ks),Fs=ac.a.mark(Ys);function Ls(){var e;return ac.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Hi.b)(xs.loadAll);case 2:return e=t.sent,t.next=5,Object(Hi.c)(dn(e));case 5:return t.next=7,Object(Hi.d)(nn);case 7:if(t.sent.accountId||!(e.length>0)){t.next=11;break}return t.next=11,hs();case 11:case"end":return t.stop()}},Rs,this)}function Ps(e){var t;return ac.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,n.next=4,Object(Hi.b)(xs.save,t);case 4:return n.next=6,hs();case 6:return n.next=8,Object(Hi.c)(fn());case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(1),n.next=14,Object(Hi.c)(bn(t.id));case 14:case"end":return n.stop()}},Ns,this,[[1,10]])}function Us(e){var t;return ac.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Hi.b)(xs.mutateBalance,e);case 2:return t=n.sent,n.next=5,Object(Hi.c)(hn(t));case 5:case"end":return n.stop()}},_s,this)}function Gs(e){var t,n,a;return ac.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.payload,r.prev=1,n={},Object(J.a)(n,c.Archive,Bs),Object(J.a)(n,c.Cleanup,Ks),Object(J.a)(n,c.Move,Ys),!(a=n[t.strategy])){r.next=7;break}return r.next=7,a(t.id,t.moveTo);case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(1),r.next=13,Object(Hi.c)(jn(r.t0.message));case 13:case"end":return r.stop()}},Is,this,[[1,9]])}function Bs(e){return ac.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Hi.b)(xs.archive,e);case 2:return t.next=4,Object(Hi.c)(En(e));case 4:case"end":return t.stop()}},Ds,this)}function Ks(e){var t,n,a,r,c,o,i,s,u,l;return ac.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Object(Hi.b)(Sc.loadFiltered,{accounts:[e]});case 2:if(!((t=p.sent).length>0)){p.next=37;break}return p.next=6,Object(Hi.c)(yn(t.length));case 6:n=!0,a=!1,r=void 0,p.prev=9,c=t.entries()[Symbol.iterator]();case 11:if(n=(o=c.next()).done){p.next=23;break}return i=o.value,s=Object($.a)(i,2),u=s[0],l=s[1],p.next=18,ys(ft(l.id));case 18:return p.next=20,Object(Hi.c)(vn(u));case 20:n=!0,p.next=11;break;case 23:p.next=29;break;case 25:p.prev=25,p.t0=p.catch(9),a=!0,r=p.t0;case 29:p.prev=29,p.prev=30,n||null==c.return||c.return();case 32:if(p.prev=32,!a){p.next=35;break}throw r;case 35:return p.finish(32);case 36:return p.finish(29);case 37:return p.next=39,Object(Hi.b)(xs.remove,e);case 39:return p.next=41,Object(Hi.c)(En(e));case 41:case"end":return p.stop()}},Ms,this,[[9,25,29,37],[30,,32,36]])}function Ys(e,t){var n,a,r,c,o,i,s,u,l,p;return ac.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Object(Hi.b)(Sc.loadFiltered,{accounts:[e]});case 2:if(!((n=d.sent).length>0)){d.next=37;break}return d.next=6,Object(Hi.c)(yn(n.length));case 6:a=!0,r=!1,c=void 0,d.prev=9,o=n.entries()[Symbol.iterator]();case 11:if(a=(i=o.next()).done){d.next=23;break}return s=i.value,u=Object($.a)(s,2),l=u[0],p=u[1],d.next=18,vs(mt(Object(b.a)({},p,{accountId:p.accountId===e?t:p.accountId,linkedAccountId:p.linkedAccountId===e?t:p.linkedAccountId})));case 18:return d.next=20,Object(Hi.c)(vn(l));case 20:a=!0,d.next=11;break;case 23:d.next=29;break;case 25:d.prev=25,d.t0=d.catch(9),r=!0,c=d.t0;case 29:d.prev=29,d.prev=30,a||null==o.return||o.return();case 32:if(d.prev=32,!r){d.next=35;break}throw c;case 35:return d.finish(32);case 36:return d.finish(29);case 37:return d.next=39,Object(Hi.b)(xs.remove,e);case 39:return d.next=41,Object(Hi.c)(En(e));case 41:case"end":return d.stop()}},Fs,this,[[9,25,29,37],[30,,32,36]])}var Ws=[Object(Hi.e)(pn,Ls),Object(Hi.e)(mn,Ps),Object(Hi.e)(gn,Gs),Object(Hi.e)(En,hs)],Hs=ac.a.mark(Vs),zs=ac.a.mark($s);function Vs(){var e;return ac.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Hi.c)(Ao());case 2:return t.prev=2,t.next=5,Object(Hi.d)(Qc);case 5:return e=t.sent,t.next=8,Object(Hi.b)(xs.sync,e);case 8:return t.next=10,Object(Hi.b)(Sc.sync,e);case 10:return t.next=12,Object(Hi.b)(es.sync,e);case 12:return t.next=14,Os();case 14:return t.next=16,Ls();case 16:return t.next=18,is();case 18:return t.next=20,Object(Hi.c)(To());case 20:t.next=26;break;case 22:return t.prev=22,t.t0=t.catch(2),t.next=26,Object(Hi.c)(wo(t.t0));case 26:case"end":return t.stop()}},Hs,this,[[2,22]])}function $s(){return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hi.c)(ko());case 2:case"end":return e.stop()}},zs,this)}var Js=[Object(Hi.e)(So,Vs),Object(Hi.e)(fn,$s),Object(Hi.e)(En,$s),Object(Hi.e)(bt,$s),Object(Hi.e)(ht,$s)],qs=n(71),Qs=n.n(qs),Zs=n(161),Xs=n.n(Zs),eu=n(331),tu=n.n(eu);function nu(e,t){t.includes(e)||t.push(e);var n=t.map(function(t){return"".concat(e).concat(t)});return tu()("".concat("https://wt-e9c9a7a436fcd9273a7f8890849dae65-0.sandbox.auth0-extend.com/currency-exchange","?pairs=").concat(n.join(","))).then(function(e){return e.json()}).then(function(e){return e.rates.reduce(function(e,t){return e[t.id.substring(3)]=parseFloat(t.rate),e},{})})}var au={load:function(){return dc().get("_local/settings").then(function(e){return e},function(e){return ru}).then(function(e){return function(e){return su.apply(this,arguments)}(e)})},save:ou,saveLocal:function(e){return dc().get("_local/settings").then(function(e){return e},function(e){return ru}).then(function(t){return dc().put(Object(b.a)({},t,e))})},destroy:function(){return vc()}},ru={_id:"_local/settings",collapsedSections:[]},cu={_id:"settings",currency:{base:G.defaultBase,secondary:[]},exchangeRate:Object(J.a)({},G.defaultBase,1)};function ou(e){return iu.apply(this,arguments)}function iu(){return(iu=Object(rc.a)(ac.a.mark(function e(t){return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!hc()){e.next=3;break}return e.next=3,hc().get("settings").then(function(e){return e},function(e){return cu}).then(function(e){return hc().put(Object(b.a)({},e,t))}).catch(function(e){if(403!==e.status)throw e});case 3:return e.abrupt("return",dc().get("settings").then(function(e){return e},function(e){return cu}).then(function(e){return dc().put(Object(b.a)({},e,t))}));case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function su(){return(su=Object(rc.a)(ac.a.mark(function e(t){return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dc().get("settings").then(function(e){return e},function(e){return cu}).then(function(e){return uu(e)}).then(function(e){return Object(b.a)({},e,t)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function uu(e){return lu.apply(this,arguments)}function lu(){return(lu=Object(rc.a)(ac.a.mark(function e(t){var n,a,r,c;return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(hc()){e.next=2;break}return e.abrupt("return",t);case 2:return e.prev=2,e.next=5,hc().get("settings");case 5:if(n=e.sent,a=n.currency.base,r=Qs()(t.currency.base,t.currency.secondary,n.currency.secondary).filter(function(e){return e!==a}),e.t0={base:a,secondary:r},t.currency.base!==a){e.next=13;break}e.t1=Object(b.a)({},t.exchangeRate,n.exchangeRate),e.next=16;break;case 13:return e.next=15,nu(a,r);case 15:e.t1=e.sent;case 16:if(e.t2=e.t1,e.t3=n.isSetupComplete,c={currency:e.t0,exchangeRate:e.t2,isSetupComplete:e.t3},Xs()(ji()(t,Object.keys(c)),c)){e.next=22;break}return e.next=22,ou(c);case 22:return e.abrupt("return",c);case 25:return e.prev=25,e.t4=e.catch(2),e.abrupt("return",t);case 28:case"end":return e.stop()}},e,this,[[2,25]])}))).apply(this,arguments)}var pu=ac.a.mark(fu),du=ac.a.mark(hu),mu=ac.a.mark(gu),bu=ac.a.mark(Ou);function fu(){var e;return ac.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Hi.b)(au.load);case 2:return e=t.sent,t.next=5,Object(Hi.c)(_(e));case 5:case"end":return t.stop()}},pu,this)}function hu(){var e,t,n,a;return ac.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Hi.d)(K);case 2:return e=r.sent,r.next=5,Object(Hi.d)(W);case 5:return t=r.sent,r.next=8,Object(Hi.d)(he);case 8:return n=r.sent,r.prev=9,r.next=12,Object(Hi.b)(nu,e,Qs()(t,n));case 12:return a=r.sent,r.next=15,Object(Hi.c)(M(a));case 15:return r.next=17,Object(Hi.b)(au.save,{currency:{base:e,secondary:t},exchangeRate:a});case 17:r.next=23;break;case 19:return r.prev=19,r.t0=r.catch(9),r.next=23,Object(Hi.c)(F(r.t0));case 23:case"end":return r.stop()}},du,this,[[9,19]])}function gu(){return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hi.b)(au.save,{isSetupComplete:!0});case 2:case"end":return e.stop()}},mu,this)}function Ou(){var e;return ac.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Hi.d)(H);case 2:return e=t.sent,t.next=5,Object(Hi.b)(au.saveLocal,{collapsedSections:e});case 5:case"end":return t.stop()}},bu,this)}var yu=[Object(Hi.e)(I,hu),Object(Hi.e)(D,hu),Object(Hi.e)(P,gu),Object(Hi.e)(L,Ou)],vu=ac.a.mark(Eu),ju=ac.a.mark(xu);function Eu(){return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("demo.moneytracker.cc"!==window.location.hostname){e.next=13;break}return e.next=3,Object(Hi.b)([localStorage,"getItem"],"userInfo");case 3:if(e.sent){e.next=9;break}return e.next=7,Object(Hi.b)([localStorage,"setItem"],"userInfo",JSON.stringify({couchDB:{accounts:"https://couch.moneytracker.cc/accounts_2b4d1cad-7dcd-42e6-b8fc-e29206a8f889",settings:"https://couch.moneytracker.cc/settings_2b4d1cad-7dcd-42e6-b8fc-e29206a8f889",tags:"https://couch.moneytracker.cc/tags_2b4d1cad-7dcd-42e6-b8fc-e29206a8f889",transactions:"https://couch.moneytracker.cc/transactions_2b4d1cad-7dcd-42e6-b8fc-e29206a8f889"}}));case 7:return e.next=9,Vs();case 9:return e.next=11,Object(Hi.c)(Ki());case 11:return e.next=13,Object(Hi.c)(Yi());case 13:case"end":return e.stop()}},vu,this)}function xu(){return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hi.b)([localStorage,"getItem"],"userInfo");case 2:if(!e.sent){e.next=6;break}return e.next=6,Object(Hi.c)(Yi());case 6:case"end":return e.stop()}},ju,this)}var Cu=ac.a.mark(Au),ku=ac.a.mark(Tu),Su=ac.a.mark(wu);function Au(){var e;return ac.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Hi.d)($i);case 2:return e=t.sent,t.prev=3,t.next=6,Object(Hi.b)(Vi.sendCode,e);case 6:return t.next=8,Object(Hi.c)(oo());case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(3),t.next=14,Object(Hi.c)(io(t.t0));case 14:case"end":return t.stop()}},Cu,this,[[3,10]])}function Tu(){var e,t;return ac.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Hi.d)($i);case 2:return e=n.sent,n.next=5,Object(Hi.d)(Ji);case 5:return t=n.sent,n.prev=6,n.next=9,Object(Hi.b)(Vi.verifyCode,e,t);case 9:return n.next=11,Object(Hi.c)(uo());case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(6),n.next=17,Object(Hi.c)(lo(n.t0));case 17:case"end":return n.stop()}},ku,this,[[6,13]])}function wu(){var e,t;return ac.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Hi.b)(Vi.parseHash);case 2:return e=n.sent,n.next=5,Object(Hi.b)(Vi.getUserInfo,e);case 5:return t=n.sent,n.next=8,Object(Hi.b)([localStorage,"setItem"],"userInfo",JSON.stringify(t));case 8:return n.next=10,fu();case 10:return n.next=12,Vs();case 12:return n.next=14,xu();case 14:case"end":return n.stop()}},Su,this)}var Ru=[Object(Hi.e)(Object(Vc.getType)(co),Au),Object(Hi.e)(Object(Vc.getType)(so),Tu),Object(Hi.e)(Object(Vc.getType)(po),wu)],Nu=ac.a.mark(_u);function _u(){return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Hi.b)(xs.destroy);case 3:return e.next=5,Object(Hi.b)(au.destroy);case 5:return e.next=7,Object(Hi.b)(es.destroy);case 7:return e.next=9,Object(Hi.b)(Sc.destroy);case 9:return e.next=11,Object(Hi.b)([localStorage,"clear"]);case 11:return e.next=13,Object(Hi.c)(Jc());case 13:return e.next=15,Eu();case 15:return e.next=17,fu();case 17:e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(0),e.next=23,Object(Hi.c)(qc(e.t0));case 23:case"end":return e.stop()}},Nu,this,[[0,19]])}var Iu=[Object(Hi.e)(Object(Vc.getType)($c),_u)],Du=Object(ai.combineReducers)({signIn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(Vc.getType)(ao):return Object(b.a)({},e,{email:t.payload});case Object(Vc.getType)(ro):return Object(b.a)({},e,{code:t.payload});case Object(Vc.getType)(co):return Object(b.a)({},e,{sendCodeStatus:"REQUEST"});case Object(Vc.getType)(oo):return Object(b.a)({},e,{sendCodeStatus:"SUCCESS"});case Object(Vc.getType)(io):return Object(b.a)({},e,{sendCodeStatus:"FAILURE",error:t.payload.message});case Object(Vc.getType)(so):return Object(b.a)({},e,{verifyCodeStatus:"REQUEST"});case Object(Vc.getType)(uo):return Object(b.a)({},e,{verifyCodeStatus:"SUCCESS"});case Object(Vc.getType)(lo):return Object(b.a)({},e,{verifyCodeStatus:"FAILURE",error:t.payload.message});default:return e}},signOut:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case Object(Vc.getType)($c):return Object(b.a)({},e,{signOutState:"REQUEST"});case Object(Vc.getType)(Jc):return Object(b.a)({},e,{signOutState:"SUCCESS"});case Object(Vc.getType)(qc):return Object(b.a)({},e,{signOutState:"FAILURE"});default:return e}}}),Mu=Object(m.a)(Ru).concat(Object(m.a)(Iu)),Fu=Object(ai.combineReducers)({isDemoUser:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(arguments.length>1?arguments[1]:void 0).type===Object(Vc.getType)(Ki)||e},isSignedIn:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(arguments.length>1?arguments[1]:void 0).type===Object(Vc.getType)(Yi)||e},ui:Du}),Lu=Object(ai.combineReducers)({settings:Bi,entities:yi,user:Fu,ui:Ui}),Pu=ac.a.mark(Uu);function Uu(){return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eu();case 2:return e.next=4,xu();case 4:return e.next=6,fu();case 6:return e.next=8,Vs();case 8:case"end":return e.stop()}},Pu,this)}var Gu=[Object(Hi.e)(Fo,Uu)],Bu=ce.Expense,Ku=ce.Transfer,Yu=ce.Income,Wu=function(e){return new Promise(function(t,n){var a=new FileReader;a.onerror=n,a.onload=function(e){try{t(function(e){if(e[0].split(Hu).length!==Object.keys(zu).length)throw new Error("Invalid file format!\n    Must be a CSV with following columns:\n    date;account;tags;amount;currency;description;transfer");for(var t=1;t<e.length;t++){var n=e[t].split(Hu);if(n.length===Object.keys(zu).length){var a={kind:Qu(n),account:Zu(n),amount:Math.abs(qu(n)),currency:n[zu.CURRENCY],date:Xu(n),tags:el(n),note:n[zu.NOTE]};if(a.kind===Ku){var r=e[++t].split(Hu);a.linkedAccount=Zu(r),a.linkedAmount=qu(r),a.linkedCurrency=r[zu.CURRENCY]}Vu.push(a)}}return{transactions:Vu,accounts:$u,currencies:Ju}}(e.target.result.split("\n")))}catch(a){n(a)}},a.readAsText(e)})},Hu=";",zu={DATE:0,ACCOUNT:1,TAGS:2,AMOUNT:3,CURRENCY:4,NOTE:5,TRANSFER:6},Vu=[],$u=new Map,Ju=new Set;function qu(e){return parseFloat(e[zu.AMOUNT].replace(",","."))}function Qu(e){return e[zu.TRANSFER].trim()?Ku:qu(e)<0?Bu:Yu}function Zu(e){var t=e[zu.ACCOUNT],n=e[zu.CURRENCY];$u.has(t)||$u.set(t,new Set);var a=$u.get(t);return a.has(n)||a.add(n),Ju.has(n)||Ju.add(n),t}function Xu(e){return e[zu.DATE].split(".").reverse().join("-")}function el(e){return e[zu.TAGS].trim()&&Object(J.a)({},Qu(e),e[zu.TAGS].replace("\\","/").split("/"))}var tl=ac.a.mark(cl),nl=ac.a.mark(ol),al=ac.a.mark(il),rl=ac.a.mark(sl);function cl(){var e,t,n,a,r,c,o,i,s,u,l,p,d,m,f;return ac.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.prev=0,h.next=3,Object(Hi.d)(Wc);case 3:return e=h.sent,h.next=6,Object(Hi.b)(Wu,e);case 6:return t=h.sent,n=t.transactions,a=t.accounts,r=t.currencies,h.next=12,Object(Hi.c)(Bc(n.length-1));case 12:return h.next=14,ol(r);case 14:return h.next=16,il(a);case 16:c=h.sent,o=!0,i=!1,s=void 0,h.prev=20,u=n.entries()[Symbol.iterator]();case 22:if(o=(l=u.next()).done){h.next=34;break}return p=l.value,d=Object($.a)(p,2),m=d[0],f=d[1],h.next=29,vs(mt($e(Object(b.a)({},f,{accountId:c.get(f.account),linkedAccountId:c.get(f.linkedAccount)}))));case 29:return h.next=31,Object(Hi.c)(Kc(m));case 31:o=!0,h.next=22;break;case 34:h.next=40;break;case 36:h.prev=36,h.t0=h.catch(20),i=!0,s=h.t0;case 40:h.prev=40,h.prev=41,o||null==u.return||u.return();case 43:if(h.prev=43,!i){h.next=46;break}throw s;case 46:return h.finish(43);case 47:return h.finish(40);case 48:h.next=54;break;case 50:return h.prev=50,h.t1=h.catch(0),h.next=54,Object(Hi.c)(Yc(h.t1));case 54:case"end":return h.stop()}},tl,this,[[0,50],[20,36,40,48],[41,,43,47]])}function ol(e){var t,n;return ac.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Hi.d)(K);case 2:return t=a.sent,a.next=5,Object(Hi.d)(W);case 5:return n=a.sent,a.next=8,Object(Hi.c)(I({base:t,secondary:Qs()(n,Object(m.a)(e))}));case 8:case"end":return a.stop()}},nl,this)}function il(e){var t,n,a,r,c,o,i,s,u,l,p;return ac.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:t=new Map,n=!0,a=!1,r=void 0,d.prev=4,c=e.entries()[Symbol.iterator]();case 6:if(n=(o=c.next()).done){d.next=22;break}return i=o.value,s=Object($.a)(i,2),u=s[0],l=s[1],d.next=13,Object(Hi.d)(le(u));case 13:if(p=d.sent){d.next=18;break}return d.next=17,sl(u,Object(m.a)(l));case 17:p=d.sent;case 18:t.set(u,p.id);case 19:n=!0,d.next=6;break;case 22:d.next=28;break;case 24:d.prev=24,d.t0=d.catch(4),a=!0,r=d.t0;case 28:d.prev=28,d.prev=29,n||null==c.return||c.return();case 31:if(d.prev=31,!a){d.next=34;break}throw r;case 34:return d.finish(31);case 35:return d.finish(28);case 36:return d.abrupt("return",t);case 37:case"end":return d.stop()}},al,this,[[4,24,28,36],[29,,31,35]])}function sl(e,t){var n;return ac.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=ee({name:e,group:Q,balance:t.reduce(function(e,t){return e[t]=0,e},{}),currencies:t,on_dashboard:!1}),a.next=3,Ps(mn(n));case 3:return a.abrupt("return",n);case 4:case"end":return a.stop()}},rl,this)}var ul=[Object(Hi.e)(Gc,cl)],ll=ac.a.mark(dl),pl=ac.a.mark(ml);function dl(){var e,t,n,a,r,c;return ac.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(Hi.d)(Kr);case 2:return e=o.sent,o.next=5,Object(Hi.d)(K);case 5:return t=o.sent,o.next=8,Object(Hi.d)(B);case 8:if(n=o.sent,o.t0=e.data.netWorthEnd,o.t0){o.next=14;break}return o.next=13,Object(Hi.d)(je);case 13:o.t0=o.sent;case 14:return a=o.t0,o.prev=15,o.next=18,Object(Hi.b)(Sc.loadFiltered,{date:(i=e).date,accounts:i.accounts});case 18:return r=o.sent,o.next=21,Object(Hi.b)(wr,e,r,n,t,a);case 21:return c=o.sent,o.next=24,Object(Hi.c)(Va(c));case 24:o.next=30;break;case 26:return o.prev=26,o.t1=o.catch(15),o.next=30,Object(Hi.c)($a(o.t1.message));case 30:case"end":return o.stop()}var i},ll,this,[[15,26]])}function ml(){return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hi.c)(za());case 2:case"end":return e.stop()}},pl,this)}var bl=[Object(Hi.e)(za,dl),Object(Hi.e)(Ba,ml),Object(Hi.e)(Ka,ml),Object(Hi.e)(Ya,ml),Object(Hi.e)(Wa,ml),Object(Hi.e)(Ha,ml)],fl=Object(m.a)(Mu),hl=ac.a.mark(gl);function gl(){return ac.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hi.a)(Object(m.a)(fl).concat(Object(m.a)(Ws),Object(m.a)(Gu),Object(m.a)(ul),Object(m.a)(bl),Object(m.a)(yu),Object(m.a)(Js),Object(m.a)(us),Object(m.a)(Es)));case 2:case"end":return e.stop()}},hl,this)}var Ol=Object(ni.a)(),yl=Object(ri.composeWithDevTools)(Object(ai.applyMiddleware)(Ol));p.init({dsn:"https://5ae855d4c1d840c1b06679123069574f@sentry.io/1335198"});var vl=function(e){var t=Object(ai.createStore)(Lu,e,yl);return Ol.run(gl),t}(),jl=Object(o.a)();l.a.render(s.a.createElement(Go,{store:vl,history:jl}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");Bo?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ko(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):Ko(e)})}}()}},[[342,2,1]]]);
//# sourceMappingURL=main.0f40d958.chunk.js.map